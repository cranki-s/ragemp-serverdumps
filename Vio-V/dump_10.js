{
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./src/index.ts":
/*!**********************!*\
  !*** ./src/index.ts ***!
  \**********************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.Main = void 0;\nconst SyncedTrains_1 = __webpack_require__(/*! ./system/train/SyncedTrains */ \"./src/system/train/SyncedTrains.ts\");\nconst AmbientTrain_1 = __webpack_require__(/*! ./system/train/AmbientTrain */ \"./src/system/train/AmbientTrain.ts\");\nconst PlayerTrainControl_1 = __webpack_require__(/*! ./system/train/PlayerTrainControl */ \"./src/system/train/PlayerTrainControl.ts\");\nconst TrainJob_1 = __webpack_require__(/*! ./jobs/TrainJob */ \"./src/jobs/TrainJob.ts\");\nconst VehicleBoosts_1 = __webpack_require__(/*! ./system/vehicles/VehicleBoosts */ \"./src/system/vehicles/VehicleBoosts.ts\");\nconst AltitudeMeter_1 = __webpack_require__(/*! ./system/vehicles/AltitudeMeter */ \"./src/system/vehicles/AltitudeMeter.ts\");\nconst Login_1 = __webpack_require__(/*! ./system/Login */ \"./src/system/Login.ts\");\nclass Main {\n    static init() {\n        Login_1.Login.init();\n        Main.initTrainSystems();\n        Main.initVehicleSystems();\n    }\n    static initTrainSystems() {\n        SyncedTrains_1.SyncedTrains.init();\n        AmbientTrain_1.AmbientTrain.init();\n        PlayerTrainControl_1.PlayerTrainControl.init();\n        TrainJob_1.TrainJob.init();\n    }\n    static initVehicleSystems() {\n        VehicleBoosts_1.VehicleBoosts.init();\n        AltitudeMeter_1.AltitudeMeter.init();\n    }\n}\nexports.Main = Main;\nMain.init();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvaW5kZXgudHMuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYiw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0QsWUFBWTtBQUNaLHVCQUF1QixtQkFBTyxDQUFDLHVFQUE2QjtBQUM1RCx1QkFBdUIsbUJBQU8sQ0FBQyx1RUFBNkI7QUFDNUQsNkJBQTZCLG1CQUFPLENBQUMsbUZBQW1DO0FBQ3hFLG1CQUFtQixtQkFBTyxDQUFDLCtDQUFpQjtBQUM1Qyx3QkFBd0IsbUJBQU8sQ0FBQywrRUFBaUM7QUFDakUsd0JBQXdCLG1CQUFPLENBQUMsK0VBQWlDO0FBQ2pFLGdCQUFnQixtQkFBTyxDQUFDLDZDQUFnQjtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdmlvLXYtcm9sZXBsYXktY2xpZW50Ly4vc3JjL2luZGV4LnRzP2U5NGUiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLk1haW4gPSB2b2lkIDA7XG5jb25zdCBTeW5jZWRUcmFpbnNfMSA9IHJlcXVpcmUoXCIuL3N5c3RlbS90cmFpbi9TeW5jZWRUcmFpbnNcIik7XG5jb25zdCBBbWJpZW50VHJhaW5fMSA9IHJlcXVpcmUoXCIuL3N5c3RlbS90cmFpbi9BbWJpZW50VHJhaW5cIik7XG5jb25zdCBQbGF5ZXJUcmFpbkNvbnRyb2xfMSA9IHJlcXVpcmUoXCIuL3N5c3RlbS90cmFpbi9QbGF5ZXJUcmFpbkNvbnRyb2xcIik7XG5jb25zdCBUcmFpbkpvYl8xID0gcmVxdWlyZShcIi4vam9icy9UcmFpbkpvYlwiKTtcbmNvbnN0IFZlaGljbGVCb29zdHNfMSA9IHJlcXVpcmUoXCIuL3N5c3RlbS92ZWhpY2xlcy9WZWhpY2xlQm9vc3RzXCIpO1xuY29uc3QgQWx0aXR1ZGVNZXRlcl8xID0gcmVxdWlyZShcIi4vc3lzdGVtL3ZlaGljbGVzL0FsdGl0dWRlTWV0ZXJcIik7XG5jb25zdCBMb2dpbl8xID0gcmVxdWlyZShcIi4vc3lzdGVtL0xvZ2luXCIpO1xuY2xhc3MgTWFpbiB7XG4gICAgc3RhdGljIGluaXQoKSB7XG4gICAgICAgIExvZ2luXzEuTG9naW4uaW5pdCgpO1xuICAgICAgICBNYWluLmluaXRUcmFpblN5c3RlbXMoKTtcbiAgICAgICAgTWFpbi5pbml0VmVoaWNsZVN5c3RlbXMoKTtcbiAgICB9XG4gICAgc3RhdGljIGluaXRUcmFpblN5c3RlbXMoKSB7XG4gICAgICAgIFN5bmNlZFRyYWluc18xLlN5bmNlZFRyYWlucy5pbml0KCk7XG4gICAgICAgIEFtYmllbnRUcmFpbl8xLkFtYmllbnRUcmFpbi5pbml0KCk7XG4gICAgICAgIFBsYXllclRyYWluQ29udHJvbF8xLlBsYXllclRyYWluQ29udHJvbC5pbml0KCk7XG4gICAgICAgIFRyYWluSm9iXzEuVHJhaW5Kb2IuaW5pdCgpO1xuICAgIH1cbiAgICBzdGF0aWMgaW5pdFZlaGljbGVTeXN0ZW1zKCkge1xuICAgICAgICBWZWhpY2xlQm9vc3RzXzEuVmVoaWNsZUJvb3N0cy5pbml0KCk7XG4gICAgICAgIEFsdGl0dWRlTWV0ZXJfMS5BbHRpdHVkZU1ldGVyLmluaXQoKTtcbiAgICB9XG59XG5leHBvcnRzLk1haW4gPSBNYWluO1xuTWFpbi5pbml0KCk7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/index.ts\n");

/***/ }),

/***/ "./src/jobs/TrainJob.ts":
/*!******************************!*\
  !*** ./src/jobs/TrainJob.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.TrainJob = void 0;\nconst CommunicationManager_1 = __webpack_require__(/*! ../utils/CommunicationManager */ \"./src/utils/CommunicationManager.ts\");\nconst PlayerTrainControl_1 = __webpack_require__(/*! ../system/train/PlayerTrainControl */ \"./src/system/train/PlayerTrainControl.ts\");\nclass TrainJob {\n    static init() {\n        CommunicationManager_1.CommunicationManager.addServerEvent('TrainJob:StartJob', TrainJob.startJob);\n    }\n    static startJob(id) {\n        PlayerTrainControl_1.PlayerTrainControl.activate(id, 0.025, 0.025, 45);\n    }\n}\nexports.TrainJob = TrainJob;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvam9icy9UcmFpbkpvYi50cy5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiLDhDQUE2QyxFQUFFLGFBQWEsRUFBQztBQUM3RCxnQkFBZ0I7QUFDaEIsK0JBQStCLG1CQUFPLENBQUMsMEVBQStCO0FBQ3RFLDZCQUE2QixtQkFBTyxDQUFDLG9GQUFvQztBQUN6RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdmlvLXYtcm9sZXBsYXktY2xpZW50Ly4vc3JjL2pvYnMvVHJhaW5Kb2IudHM/YjYxYiJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuVHJhaW5Kb2IgPSB2b2lkIDA7XG5jb25zdCBDb21tdW5pY2F0aW9uTWFuYWdlcl8xID0gcmVxdWlyZShcIi4uL3V0aWxzL0NvbW11bmljYXRpb25NYW5hZ2VyXCIpO1xuY29uc3QgUGxheWVyVHJhaW5Db250cm9sXzEgPSByZXF1aXJlKFwiLi4vc3lzdGVtL3RyYWluL1BsYXllclRyYWluQ29udHJvbFwiKTtcbmNsYXNzIFRyYWluSm9iIHtcbiAgICBzdGF0aWMgaW5pdCgpIHtcbiAgICAgICAgQ29tbXVuaWNhdGlvbk1hbmFnZXJfMS5Db21tdW5pY2F0aW9uTWFuYWdlci5hZGRTZXJ2ZXJFdmVudCgnVHJhaW5Kb2I6U3RhcnRKb2InLCBUcmFpbkpvYi5zdGFydEpvYik7XG4gICAgfVxuICAgIHN0YXRpYyBzdGFydEpvYihpZCkge1xuICAgICAgICBQbGF5ZXJUcmFpbkNvbnRyb2xfMS5QbGF5ZXJUcmFpbkNvbnRyb2wuYWN0aXZhdGUoaWQsIDAuMDI1LCAwLjAyNSwgNDUpO1xuICAgIH1cbn1cbmV4cG9ydHMuVHJhaW5Kb2IgPSBUcmFpbkpvYjtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/jobs/TrainJob.ts\n");

/***/ }),

/***/ "./src/system/Login.ts":
/*!*****************************!*\
  !*** ./src/system/Login.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.Login = void 0;\nconst CommunicationManager_1 = __webpack_require__(/*! ../utils/CommunicationManager */ \"./src/utils/CommunicationManager.ts\");\nconst Globals_1 = __webpack_require__(/*! ../utils/Globals */ \"./src/utils/Globals.ts\");\nclass Login {\n    static init() {\n        CommunicationManager_1.CommunicationManager.addServerEvent('loginInit', Login.onLoginInit);\n        CommunicationManager_1.CommunicationManager.addServerEvent('SendClientMasterKey', Login.onSetSaveServerEventTriggerKey);\n    }\n    static async onLoginInit(arg2, betaserver, master_items) {\n        Globals_1.Globals.IS_ON_BETA_SERVER = betaserver;\n    }\n    static async onSetSaveServerEventTriggerKey(key) {\n        if (Globals_1.Globals.SAVE_SERVER_TRIGGER_KEY == null || Globals_1.Globals.SAVE_SERVER_TRIGGER_KEY == '') {\n            Globals_1.Globals.SAVE_SERVER_TRIGGER_KEY = key;\n        }\n    }\n}\nexports.Login = Login;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvc3lzdGVtL0xvZ2luLnRzLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2IsOENBQTZDLEVBQUUsYUFBYSxFQUFDO0FBQzdELGFBQWE7QUFDYiwrQkFBK0IsbUJBQU8sQ0FBQywwRUFBK0I7QUFDdEUsa0JBQWtCLG1CQUFPLENBQUMsZ0RBQWtCO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdmlvLXYtcm9sZXBsYXktY2xpZW50Ly4vc3JjL3N5c3RlbS9Mb2dpbi50cz8xOWRjIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5Mb2dpbiA9IHZvaWQgMDtcbmNvbnN0IENvbW11bmljYXRpb25NYW5hZ2VyXzEgPSByZXF1aXJlKFwiLi4vdXRpbHMvQ29tbXVuaWNhdGlvbk1hbmFnZXJcIik7XG5jb25zdCBHbG9iYWxzXzEgPSByZXF1aXJlKFwiLi4vdXRpbHMvR2xvYmFsc1wiKTtcbmNsYXNzIExvZ2luIHtcbiAgICBzdGF0aWMgaW5pdCgpIHtcbiAgICAgICAgQ29tbXVuaWNhdGlvbk1hbmFnZXJfMS5Db21tdW5pY2F0aW9uTWFuYWdlci5hZGRTZXJ2ZXJFdmVudCgnbG9naW5Jbml0JywgTG9naW4ub25Mb2dpbkluaXQpO1xuICAgICAgICBDb21tdW5pY2F0aW9uTWFuYWdlcl8xLkNvbW11bmljYXRpb25NYW5hZ2VyLmFkZFNlcnZlckV2ZW50KCdTZW5kQ2xpZW50TWFzdGVyS2V5JywgTG9naW4ub25TZXRTYXZlU2VydmVyRXZlbnRUcmlnZ2VyS2V5KTtcbiAgICB9XG4gICAgc3RhdGljIGFzeW5jIG9uTG9naW5Jbml0KGFyZzIsIGJldGFzZXJ2ZXIsIG1hc3Rlcl9pdGVtcykge1xuICAgICAgICBHbG9iYWxzXzEuR2xvYmFscy5JU19PTl9CRVRBX1NFUlZFUiA9IGJldGFzZXJ2ZXI7XG4gICAgfVxuICAgIHN0YXRpYyBhc3luYyBvblNldFNhdmVTZXJ2ZXJFdmVudFRyaWdnZXJLZXkoa2V5KSB7XG4gICAgICAgIGlmIChHbG9iYWxzXzEuR2xvYmFscy5TQVZFX1NFUlZFUl9UUklHR0VSX0tFWSA9PSBudWxsIHx8IEdsb2JhbHNfMS5HbG9iYWxzLlNBVkVfU0VSVkVSX1RSSUdHRVJfS0VZID09ICcnKSB7XG4gICAgICAgICAgICBHbG9iYWxzXzEuR2xvYmFscy5TQVZFX1NFUlZFUl9UUklHR0VSX0tFWSA9IGtleTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmV4cG9ydHMuTG9naW4gPSBMb2dpbjtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/system/Login.ts\n");

/***/ }),

/***/ "./src/system/train/AmbientTrain.ts":
/*!******************************************!*\
  !*** ./src/system/train/AmbientTrain.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.AmbientTrain = void 0;\nconst CommunicationManager_1 = __webpack_require__(/*! ../../utils/CommunicationManager */ \"./src/utils/CommunicationManager.ts\");\nconst SyncedTrains_1 = __webpack_require__(/*! ./SyncedTrains */ \"./src/system/train/SyncedTrains.ts\");\nconst Globals_1 = __webpack_require__(/*! ../../utils/Globals */ \"./src/utils/Globals.ts\");\nconst Utility_1 = __webpack_require__(/*! ../../utils/Utility */ \"./src/utils/Utility.ts\");\nconst ETrainType_1 = __webpack_require__(/*! ./ETrainType */ \"./src/system/train/ETrainType.ts\");\nclass AmbientTrain {\n    static init() {\n        CommunicationManager_1.CommunicationManager.addServerEvent('AmbientTrain:SetPlayerHost', AmbientTrain.setHost);\n        CommunicationManager_1.CommunicationManager.addServerEvent('AmbientTrain:RemovePlayerHost', AmbientTrain.removeHost);\n        setInterval(() => {\n            AmbientTrain.onSyncTick();\n        }, Globals_1.Globals.TRAIN_SYNC_RATE);\n        AmbientTrain.initPositionData();\n    }\n    static initPositionData() {\n        AmbientTrain.speedChangePositions.push({\n            speed: 15,\n            position: new mp.Vector3(684, -1381, 23),\n            range: 10,\n            patternId: AmbientTrainPatterns.FRIGHT_STANDARD,\n        });\n        AmbientTrain.speedChangePositions.push({\n            speed: 40,\n            position: new mp.Vector3(558, -1418, 21),\n            range: 10,\n            patternId: AmbientTrainPatterns.FRIGHT_STANDARD,\n        });\n        AmbientTrain.speedHoldPositions.push({\n            speed: 10,\n            position: new mp.Vector3(463, -1634, 29),\n            range: 50,\n            patternId: AmbientTrainPatterns.FRIGHT_STANDARD,\n        });\n        AmbientTrain.speedHoldPositions.push({\n            speed: 10,\n            position: new mp.Vector3(369, -1747, 29),\n            range: 50,\n            patternId: AmbientTrainPatterns.FRIGHT_STANDARD,\n        });\n        AmbientTrain.speedHoldPositions.push({\n            speed: 10,\n            position: new mp.Vector3(275, -1860, 26),\n            range: 60,\n            patternId: AmbientTrainPatterns.FRIGHT_STANDARD,\n        });\n        AmbientTrain.speedHoldPositions.push({\n            speed: 10,\n            position: new mp.Vector3(219, -1926, 23),\n            range: 50,\n            patternId: AmbientTrainPatterns.FRIGHT_STANDARD,\n        });\n        AmbientTrain.speedHoldPositions.push({\n            speed: 10,\n            position: new mp.Vector3(149, -2041, 18),\n            range: 70,\n            patternId: AmbientTrainPatterns.FRIGHT_STANDARD,\n        });\n        AmbientTrain.speedHoldPositions.push({\n            speed: 10,\n            position: new mp.Vector3(219, -2389, 8),\n            range: 50,\n            patternId: AmbientTrainPatterns.FRIGHT_STANDARD,\n        });\n        AmbientTrain.speedHoldPositions.push({\n            speed: 10,\n            position: new mp.Vector3(219, -2557, 6),\n            range: 80,\n            patternId: AmbientTrainPatterns.FRIGHT_STANDARD,\n        });\n        AmbientTrain.speedHoldPositions.push({\n            speed: 10,\n            position: new mp.Vector3(2611, 1642, 27),\n            range: 80,\n            patternId: AmbientTrainPatterns.FRIGHT_STANDARD,\n        });\n        AmbientTrain.speedHoldPositions.push({\n            speed: 10,\n            position: new mp.Vector3(1724, 3460, 39),\n            range: 80,\n            patternId: AmbientTrainPatterns.FRIGHT_STANDARD,\n        });\n        AmbientTrain.speedChangePositions.push({\n            speed: 23,\n            position: new mp.Vector3(-203, -1025, 29),\n            range: 2.5,\n            patternId: AmbientTrainPatterns.METRO,\n        });\n        AmbientTrain.speedChangePositions.push({\n            speed: 13,\n            position: new mp.Vector3(-215, -1020, 29),\n            range: 2.5,\n            patternId: AmbientTrainPatterns.METRO,\n        });\n    }\n    static getTrainId() {\n        return this.ambientTrainId;\n    }\n    static setHost(id, track) {\n        AmbientTrain.ambientTrainId = id;\n        AmbientTrain.track = track;\n        const train = SyncedTrains_1.SyncedTrains.getTrain(AmbientTrain.ambientTrainId);\n        if (!train)\n            return;\n        SyncedTrains_1.SyncedTrains.getTrain(AmbientTrain.ambientTrainId)?.setTrack(track);\n        Utility_1.Utility.debugChat('-', `Du Steuerst Zug: ${SyncedTrains_1.SyncedTrains.getTrain(AmbientTrain.ambientTrainId)?.getType()}#${id}`);\n        switch (train.getType()) {\n            case ETrainType_1.ETrainType.FRIGHT_TRAIN:\n                AmbientTrain.onSetSpeed(40);\n                AmbientTrain.patternId = AmbientTrainPatterns.FRIGHT_STANDARD;\n                break;\n            case ETrainType_1.ETrainType.METRO_TRAIN:\n                AmbientTrain.onSetSpeed(23);\n                AmbientTrain.patternId = AmbientTrainPatterns.METRO;\n                break;\n        }\n    }\n    static removeHost() {\n        AmbientTrain.ambientTrainId = null;\n    }\n    static onSetSpeed(speed) {\n        if (AmbientTrain.ambientTrainId == null)\n            return;\n        if (speed == 0) {\n            SyncedTrains_1.SyncedTrains.getTrain(AmbientTrain.ambientTrainId)?.setCruiseSpeed(0);\n        }\n        else if (speed <= -1) {\n            SyncedTrains_1.SyncedTrains.getTrain(AmbientTrain.ambientTrainId)?.setCruiseSpeed(-0.95);\n        }\n        else {\n            SyncedTrains_1.SyncedTrains.getTrain(AmbientTrain.ambientTrainId)?.setCruiseSpeed(speed + 0.01);\n        }\n        AmbientTrain.constSpeed = speed;\n        AmbientTrain.holdSpeed = null;\n    }\n    static async onSyncTick() {\n        if (AmbientTrain.ambientTrainId == null)\n            return;\n        const train = SyncedTrains_1.SyncedTrains.getTrain(AmbientTrain.ambientTrainId);\n        if (!train)\n            return;\n        train.onSyncTick();\n        const trainPosition = train.getPosition();\n        AmbientTrain.speedChangePositions\n            .filter(data => data.patternId == AmbientTrain.patternId)\n            .forEach((data) => {\n            if (Utility_1.Utility.vdist2(trainPosition, data.position) < data.range ** 2) {\n                if (data.lastUpdate == null || data.lastUpdate > (Date.now() - 5 * 1000)) {\n                    AmbientTrain.onSetSpeed(data.speed);\n                    data.lastUpdate = Date.now();\n                }\n            }\n        });\n        let isHolding = false;\n        AmbientTrain.speedHoldPositions\n            .filter(data => data.patternId == AmbientTrain.patternId)\n            .forEach((data) => {\n            if (Utility_1.Utility.vdist2(trainPosition, data.position) < data.range ** 2) {\n                isHolding = true;\n                if (AmbientTrain.holdSpeed != data.speed) {\n                    train.setCruiseSpeed(data.speed + 0.01);\n                    AmbientTrain.holdSpeed = data.speed;\n                }\n            }\n        });\n        if (!isHolding && AmbientTrain.holdSpeed != null) {\n            AmbientTrain.onSetSpeed(AmbientTrain.constSpeed);\n        }\n    }\n}\nexports.AmbientTrain = AmbientTrain;\nAmbientTrain.speedChangePositions = [];\nAmbientTrain.speedHoldPositions = [];\nAmbientTrain.holdSpeed = null;\nvar AmbientTrainPatterns;\n(function (AmbientTrainPatterns) {\n    AmbientTrainPatterns[AmbientTrainPatterns[\"FRIGHT_STANDARD\"] = 0] = \"FRIGHT_STANDARD\";\n    AmbientTrainPatterns[AmbientTrainPatterns[\"METRO\"] = 1] = \"METRO\";\n})(AmbientTrainPatterns || (AmbientTrainPatterns = {}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvc3lzdGVtL3RyYWluL0FtYmllbnRUcmFpbi50cy5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiLDhDQUE2QyxFQUFFLGFBQWEsRUFBQztBQUM3RCxvQkFBb0I7QUFDcEIsK0JBQStCLG1CQUFPLENBQUMsNkVBQWtDO0FBQ3pFLHVCQUF1QixtQkFBTyxDQUFDLDBEQUFnQjtBQUMvQyxrQkFBa0IsbUJBQU8sQ0FBQyxtREFBcUI7QUFDL0Msa0JBQWtCLG1CQUFPLENBQUMsbURBQXFCO0FBQy9DLHFCQUFxQixtQkFBTyxDQUFDLHNEQUFjO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2REFBNkQsNkVBQTZFLEdBQUcsR0FBRztBQUNoSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0I7QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLG9EQUFvRCIsInNvdXJjZXMiOlsid2VicGFjazovL3Zpby12LXJvbGVwbGF5LWNsaWVudC8uL3NyYy9zeXN0ZW0vdHJhaW4vQW1iaWVudFRyYWluLnRzPzUwNzQiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkFtYmllbnRUcmFpbiA9IHZvaWQgMDtcbmNvbnN0IENvbW11bmljYXRpb25NYW5hZ2VyXzEgPSByZXF1aXJlKFwiLi4vLi4vdXRpbHMvQ29tbXVuaWNhdGlvbk1hbmFnZXJcIik7XG5jb25zdCBTeW5jZWRUcmFpbnNfMSA9IHJlcXVpcmUoXCIuL1N5bmNlZFRyYWluc1wiKTtcbmNvbnN0IEdsb2JhbHNfMSA9IHJlcXVpcmUoXCIuLi8uLi91dGlscy9HbG9iYWxzXCIpO1xuY29uc3QgVXRpbGl0eV8xID0gcmVxdWlyZShcIi4uLy4uL3V0aWxzL1V0aWxpdHlcIik7XG5jb25zdCBFVHJhaW5UeXBlXzEgPSByZXF1aXJlKFwiLi9FVHJhaW5UeXBlXCIpO1xuY2xhc3MgQW1iaWVudFRyYWluIHtcbiAgICBzdGF0aWMgaW5pdCgpIHtcbiAgICAgICAgQ29tbXVuaWNhdGlvbk1hbmFnZXJfMS5Db21tdW5pY2F0aW9uTWFuYWdlci5hZGRTZXJ2ZXJFdmVudCgnQW1iaWVudFRyYWluOlNldFBsYXllckhvc3QnLCBBbWJpZW50VHJhaW4uc2V0SG9zdCk7XG4gICAgICAgIENvbW11bmljYXRpb25NYW5hZ2VyXzEuQ29tbXVuaWNhdGlvbk1hbmFnZXIuYWRkU2VydmVyRXZlbnQoJ0FtYmllbnRUcmFpbjpSZW1vdmVQbGF5ZXJIb3N0JywgQW1iaWVudFRyYWluLnJlbW92ZUhvc3QpO1xuICAgICAgICBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICAgICAgICBBbWJpZW50VHJhaW4ub25TeW5jVGljaygpO1xuICAgICAgICB9LCBHbG9iYWxzXzEuR2xvYmFscy5UUkFJTl9TWU5DX1JBVEUpO1xuICAgICAgICBBbWJpZW50VHJhaW4uaW5pdFBvc2l0aW9uRGF0YSgpO1xuICAgIH1cbiAgICBzdGF0aWMgaW5pdFBvc2l0aW9uRGF0YSgpIHtcbiAgICAgICAgQW1iaWVudFRyYWluLnNwZWVkQ2hhbmdlUG9zaXRpb25zLnB1c2goe1xuICAgICAgICAgICAgc3BlZWQ6IDE1LFxuICAgICAgICAgICAgcG9zaXRpb246IG5ldyBtcC5WZWN0b3IzKDY4NCwgLTEzODEsIDIzKSxcbiAgICAgICAgICAgIHJhbmdlOiAxMCxcbiAgICAgICAgICAgIHBhdHRlcm5JZDogQW1iaWVudFRyYWluUGF0dGVybnMuRlJJR0hUX1NUQU5EQVJELFxuICAgICAgICB9KTtcbiAgICAgICAgQW1iaWVudFRyYWluLnNwZWVkQ2hhbmdlUG9zaXRpb25zLnB1c2goe1xuICAgICAgICAgICAgc3BlZWQ6IDQwLFxuICAgICAgICAgICAgcG9zaXRpb246IG5ldyBtcC5WZWN0b3IzKDU1OCwgLTE0MTgsIDIxKSxcbiAgICAgICAgICAgIHJhbmdlOiAxMCxcbiAgICAgICAgICAgIHBhdHRlcm5JZDogQW1iaWVudFRyYWluUGF0dGVybnMuRlJJR0hUX1NUQU5EQVJELFxuICAgICAgICB9KTtcbiAgICAgICAgQW1iaWVudFRyYWluLnNwZWVkSG9sZFBvc2l0aW9ucy5wdXNoKHtcbiAgICAgICAgICAgIHNwZWVkOiAxMCxcbiAgICAgICAgICAgIHBvc2l0aW9uOiBuZXcgbXAuVmVjdG9yMyg0NjMsIC0xNjM0LCAyOSksXG4gICAgICAgICAgICByYW5nZTogNTAsXG4gICAgICAgICAgICBwYXR0ZXJuSWQ6IEFtYmllbnRUcmFpblBhdHRlcm5zLkZSSUdIVF9TVEFOREFSRCxcbiAgICAgICAgfSk7XG4gICAgICAgIEFtYmllbnRUcmFpbi5zcGVlZEhvbGRQb3NpdGlvbnMucHVzaCh7XG4gICAgICAgICAgICBzcGVlZDogMTAsXG4gICAgICAgICAgICBwb3NpdGlvbjogbmV3IG1wLlZlY3RvcjMoMzY5LCAtMTc0NywgMjkpLFxuICAgICAgICAgICAgcmFuZ2U6IDUwLFxuICAgICAgICAgICAgcGF0dGVybklkOiBBbWJpZW50VHJhaW5QYXR0ZXJucy5GUklHSFRfU1RBTkRBUkQsXG4gICAgICAgIH0pO1xuICAgICAgICBBbWJpZW50VHJhaW4uc3BlZWRIb2xkUG9zaXRpb25zLnB1c2goe1xuICAgICAgICAgICAgc3BlZWQ6IDEwLFxuICAgICAgICAgICAgcG9zaXRpb246IG5ldyBtcC5WZWN0b3IzKDI3NSwgLTE4NjAsIDI2KSxcbiAgICAgICAgICAgIHJhbmdlOiA2MCxcbiAgICAgICAgICAgIHBhdHRlcm5JZDogQW1iaWVudFRyYWluUGF0dGVybnMuRlJJR0hUX1NUQU5EQVJELFxuICAgICAgICB9KTtcbiAgICAgICAgQW1iaWVudFRyYWluLnNwZWVkSG9sZFBvc2l0aW9ucy5wdXNoKHtcbiAgICAgICAgICAgIHNwZWVkOiAxMCxcbiAgICAgICAgICAgIHBvc2l0aW9uOiBuZXcgbXAuVmVjdG9yMygyMTksIC0xOTI2LCAyMyksXG4gICAgICAgICAgICByYW5nZTogNTAsXG4gICAgICAgICAgICBwYXR0ZXJuSWQ6IEFtYmllbnRUcmFpblBhdHRlcm5zLkZSSUdIVF9TVEFOREFSRCxcbiAgICAgICAgfSk7XG4gICAgICAgIEFtYmllbnRUcmFpbi5zcGVlZEhvbGRQb3NpdGlvbnMucHVzaCh7XG4gICAgICAgICAgICBzcGVlZDogMTAsXG4gICAgICAgICAgICBwb3NpdGlvbjogbmV3IG1wLlZlY3RvcjMoMTQ5LCAtMjA0MSwgMTgpLFxuICAgICAgICAgICAgcmFuZ2U6IDcwLFxuICAgICAgICAgICAgcGF0dGVybklkOiBBbWJpZW50VHJhaW5QYXR0ZXJucy5GUklHSFRfU1RBTkRBUkQsXG4gICAgICAgIH0pO1xuICAgICAgICBBbWJpZW50VHJhaW4uc3BlZWRIb2xkUG9zaXRpb25zLnB1c2goe1xuICAgICAgICAgICAgc3BlZWQ6IDEwLFxuICAgICAgICAgICAgcG9zaXRpb246IG5ldyBtcC5WZWN0b3IzKDIxOSwgLTIzODksIDgpLFxuICAgICAgICAgICAgcmFuZ2U6IDUwLFxuICAgICAgICAgICAgcGF0dGVybklkOiBBbWJpZW50VHJhaW5QYXR0ZXJucy5GUklHSFRfU1RBTkRBUkQsXG4gICAgICAgIH0pO1xuICAgICAgICBBbWJpZW50VHJhaW4uc3BlZWRIb2xkUG9zaXRpb25zLnB1c2goe1xuICAgICAgICAgICAgc3BlZWQ6IDEwLFxuICAgICAgICAgICAgcG9zaXRpb246IG5ldyBtcC5WZWN0b3IzKDIxOSwgLTI1NTcsIDYpLFxuICAgICAgICAgICAgcmFuZ2U6IDgwLFxuICAgICAgICAgICAgcGF0dGVybklkOiBBbWJpZW50VHJhaW5QYXR0ZXJucy5GUklHSFRfU1RBTkRBUkQsXG4gICAgICAgIH0pO1xuICAgICAgICBBbWJpZW50VHJhaW4uc3BlZWRIb2xkUG9zaXRpb25zLnB1c2goe1xuICAgICAgICAgICAgc3BlZWQ6IDEwLFxuICAgICAgICAgICAgcG9zaXRpb246IG5ldyBtcC5WZWN0b3IzKDI2MTEsIDE2NDIsIDI3KSxcbiAgICAgICAgICAgIHJhbmdlOiA4MCxcbiAgICAgICAgICAgIHBhdHRlcm5JZDogQW1iaWVudFRyYWluUGF0dGVybnMuRlJJR0hUX1NUQU5EQVJELFxuICAgICAgICB9KTtcbiAgICAgICAgQW1iaWVudFRyYWluLnNwZWVkSG9sZFBvc2l0aW9ucy5wdXNoKHtcbiAgICAgICAgICAgIHNwZWVkOiAxMCxcbiAgICAgICAgICAgIHBvc2l0aW9uOiBuZXcgbXAuVmVjdG9yMygxNzI0LCAzNDYwLCAzOSksXG4gICAgICAgICAgICByYW5nZTogODAsXG4gICAgICAgICAgICBwYXR0ZXJuSWQ6IEFtYmllbnRUcmFpblBhdHRlcm5zLkZSSUdIVF9TVEFOREFSRCxcbiAgICAgICAgfSk7XG4gICAgICAgIEFtYmllbnRUcmFpbi5zcGVlZENoYW5nZVBvc2l0aW9ucy5wdXNoKHtcbiAgICAgICAgICAgIHNwZWVkOiAyMyxcbiAgICAgICAgICAgIHBvc2l0aW9uOiBuZXcgbXAuVmVjdG9yMygtMjAzLCAtMTAyNSwgMjkpLFxuICAgICAgICAgICAgcmFuZ2U6IDIuNSxcbiAgICAgICAgICAgIHBhdHRlcm5JZDogQW1iaWVudFRyYWluUGF0dGVybnMuTUVUUk8sXG4gICAgICAgIH0pO1xuICAgICAgICBBbWJpZW50VHJhaW4uc3BlZWRDaGFuZ2VQb3NpdGlvbnMucHVzaCh7XG4gICAgICAgICAgICBzcGVlZDogMTMsXG4gICAgICAgICAgICBwb3NpdGlvbjogbmV3IG1wLlZlY3RvcjMoLTIxNSwgLTEwMjAsIDI5KSxcbiAgICAgICAgICAgIHJhbmdlOiAyLjUsXG4gICAgICAgICAgICBwYXR0ZXJuSWQ6IEFtYmllbnRUcmFpblBhdHRlcm5zLk1FVFJPLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgc3RhdGljIGdldFRyYWluSWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFtYmllbnRUcmFpbklkO1xuICAgIH1cbiAgICBzdGF0aWMgc2V0SG9zdChpZCwgdHJhY2spIHtcbiAgICAgICAgQW1iaWVudFRyYWluLmFtYmllbnRUcmFpbklkID0gaWQ7XG4gICAgICAgIEFtYmllbnRUcmFpbi50cmFjayA9IHRyYWNrO1xuICAgICAgICBjb25zdCB0cmFpbiA9IFN5bmNlZFRyYWluc18xLlN5bmNlZFRyYWlucy5nZXRUcmFpbihBbWJpZW50VHJhaW4uYW1iaWVudFRyYWluSWQpO1xuICAgICAgICBpZiAoIXRyYWluKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBTeW5jZWRUcmFpbnNfMS5TeW5jZWRUcmFpbnMuZ2V0VHJhaW4oQW1iaWVudFRyYWluLmFtYmllbnRUcmFpbklkKT8uc2V0VHJhY2sodHJhY2spO1xuICAgICAgICBVdGlsaXR5XzEuVXRpbGl0eS5kZWJ1Z0NoYXQoJy0nLCBgRHUgU3RldWVyc3QgWnVnOiAke1N5bmNlZFRyYWluc18xLlN5bmNlZFRyYWlucy5nZXRUcmFpbihBbWJpZW50VHJhaW4uYW1iaWVudFRyYWluSWQpPy5nZXRUeXBlKCl9IyR7aWR9YCk7XG4gICAgICAgIHN3aXRjaCAodHJhaW4uZ2V0VHlwZSgpKSB7XG4gICAgICAgICAgICBjYXNlIEVUcmFpblR5cGVfMS5FVHJhaW5UeXBlLkZSSUdIVF9UUkFJTjpcbiAgICAgICAgICAgICAgICBBbWJpZW50VHJhaW4ub25TZXRTcGVlZCg0MCk7XG4gICAgICAgICAgICAgICAgQW1iaWVudFRyYWluLnBhdHRlcm5JZCA9IEFtYmllbnRUcmFpblBhdHRlcm5zLkZSSUdIVF9TVEFOREFSRDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgRVRyYWluVHlwZV8xLkVUcmFpblR5cGUuTUVUUk9fVFJBSU46XG4gICAgICAgICAgICAgICAgQW1iaWVudFRyYWluLm9uU2V0U3BlZWQoMjMpO1xuICAgICAgICAgICAgICAgIEFtYmllbnRUcmFpbi5wYXR0ZXJuSWQgPSBBbWJpZW50VHJhaW5QYXR0ZXJucy5NRVRSTztcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgcmVtb3ZlSG9zdCgpIHtcbiAgICAgICAgQW1iaWVudFRyYWluLmFtYmllbnRUcmFpbklkID0gbnVsbDtcbiAgICB9XG4gICAgc3RhdGljIG9uU2V0U3BlZWQoc3BlZWQpIHtcbiAgICAgICAgaWYgKEFtYmllbnRUcmFpbi5hbWJpZW50VHJhaW5JZCA9PSBudWxsKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBpZiAoc3BlZWQgPT0gMCkge1xuICAgICAgICAgICAgU3luY2VkVHJhaW5zXzEuU3luY2VkVHJhaW5zLmdldFRyYWluKEFtYmllbnRUcmFpbi5hbWJpZW50VHJhaW5JZCk/LnNldENydWlzZVNwZWVkKDApO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHNwZWVkIDw9IC0xKSB7XG4gICAgICAgICAgICBTeW5jZWRUcmFpbnNfMS5TeW5jZWRUcmFpbnMuZ2V0VHJhaW4oQW1iaWVudFRyYWluLmFtYmllbnRUcmFpbklkKT8uc2V0Q3J1aXNlU3BlZWQoLTAuOTUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgU3luY2VkVHJhaW5zXzEuU3luY2VkVHJhaW5zLmdldFRyYWluKEFtYmllbnRUcmFpbi5hbWJpZW50VHJhaW5JZCk/LnNldENydWlzZVNwZWVkKHNwZWVkICsgMC4wMSk7XG4gICAgICAgIH1cbiAgICAgICAgQW1iaWVudFRyYWluLmNvbnN0U3BlZWQgPSBzcGVlZDtcbiAgICAgICAgQW1iaWVudFRyYWluLmhvbGRTcGVlZCA9IG51bGw7XG4gICAgfVxuICAgIHN0YXRpYyBhc3luYyBvblN5bmNUaWNrKCkge1xuICAgICAgICBpZiAoQW1iaWVudFRyYWluLmFtYmllbnRUcmFpbklkID09IG51bGwpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGNvbnN0IHRyYWluID0gU3luY2VkVHJhaW5zXzEuU3luY2VkVHJhaW5zLmdldFRyYWluKEFtYmllbnRUcmFpbi5hbWJpZW50VHJhaW5JZCk7XG4gICAgICAgIGlmICghdHJhaW4pXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHRyYWluLm9uU3luY1RpY2soKTtcbiAgICAgICAgY29uc3QgdHJhaW5Qb3NpdGlvbiA9IHRyYWluLmdldFBvc2l0aW9uKCk7XG4gICAgICAgIEFtYmllbnRUcmFpbi5zcGVlZENoYW5nZVBvc2l0aW9uc1xuICAgICAgICAgICAgLmZpbHRlcihkYXRhID0+IGRhdGEucGF0dGVybklkID09IEFtYmllbnRUcmFpbi5wYXR0ZXJuSWQpXG4gICAgICAgICAgICAuZm9yRWFjaCgoZGF0YSkgPT4ge1xuICAgICAgICAgICAgaWYgKFV0aWxpdHlfMS5VdGlsaXR5LnZkaXN0Mih0cmFpblBvc2l0aW9uLCBkYXRhLnBvc2l0aW9uKSA8IGRhdGEucmFuZ2UgKiogMikge1xuICAgICAgICAgICAgICAgIGlmIChkYXRhLmxhc3RVcGRhdGUgPT0gbnVsbCB8fCBkYXRhLmxhc3RVcGRhdGUgPiAoRGF0ZS5ub3coKSAtIDUgKiAxMDAwKSkge1xuICAgICAgICAgICAgICAgICAgICBBbWJpZW50VHJhaW4ub25TZXRTcGVlZChkYXRhLnNwZWVkKTtcbiAgICAgICAgICAgICAgICAgICAgZGF0YS5sYXN0VXBkYXRlID0gRGF0ZS5ub3coKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBsZXQgaXNIb2xkaW5nID0gZmFsc2U7XG4gICAgICAgIEFtYmllbnRUcmFpbi5zcGVlZEhvbGRQb3NpdGlvbnNcbiAgICAgICAgICAgIC5maWx0ZXIoZGF0YSA9PiBkYXRhLnBhdHRlcm5JZCA9PSBBbWJpZW50VHJhaW4ucGF0dGVybklkKVxuICAgICAgICAgICAgLmZvckVhY2goKGRhdGEpID0+IHtcbiAgICAgICAgICAgIGlmIChVdGlsaXR5XzEuVXRpbGl0eS52ZGlzdDIodHJhaW5Qb3NpdGlvbiwgZGF0YS5wb3NpdGlvbikgPCBkYXRhLnJhbmdlICoqIDIpIHtcbiAgICAgICAgICAgICAgICBpc0hvbGRpbmcgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGlmIChBbWJpZW50VHJhaW4uaG9sZFNwZWVkICE9IGRhdGEuc3BlZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdHJhaW4uc2V0Q3J1aXNlU3BlZWQoZGF0YS5zcGVlZCArIDAuMDEpO1xuICAgICAgICAgICAgICAgICAgICBBbWJpZW50VHJhaW4uaG9sZFNwZWVkID0gZGF0YS5zcGVlZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoIWlzSG9sZGluZyAmJiBBbWJpZW50VHJhaW4uaG9sZFNwZWVkICE9IG51bGwpIHtcbiAgICAgICAgICAgIEFtYmllbnRUcmFpbi5vblNldFNwZWVkKEFtYmllbnRUcmFpbi5jb25zdFNwZWVkKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmV4cG9ydHMuQW1iaWVudFRyYWluID0gQW1iaWVudFRyYWluO1xuQW1iaWVudFRyYWluLnNwZWVkQ2hhbmdlUG9zaXRpb25zID0gW107XG5BbWJpZW50VHJhaW4uc3BlZWRIb2xkUG9zaXRpb25zID0gW107XG5BbWJpZW50VHJhaW4uaG9sZFNwZWVkID0gbnVsbDtcbnZhciBBbWJpZW50VHJhaW5QYXR0ZXJucztcbihmdW5jdGlvbiAoQW1iaWVudFRyYWluUGF0dGVybnMpIHtcbiAgICBBbWJpZW50VHJhaW5QYXR0ZXJuc1tBbWJpZW50VHJhaW5QYXR0ZXJuc1tcIkZSSUdIVF9TVEFOREFSRFwiXSA9IDBdID0gXCJGUklHSFRfU1RBTkRBUkRcIjtcbiAgICBBbWJpZW50VHJhaW5QYXR0ZXJuc1tBbWJpZW50VHJhaW5QYXR0ZXJuc1tcIk1FVFJPXCJdID0gMV0gPSBcIk1FVFJPXCI7XG59KShBbWJpZW50VHJhaW5QYXR0ZXJucyB8fCAoQW1iaWVudFRyYWluUGF0dGVybnMgPSB7fSkpO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/system/train/AmbientTrain.ts\n");

/***/ }),

/***/ "./src/system/train/ETrainType.ts":
/*!****************************************!*\
  !*** ./src/system/train/ETrainType.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.ETrainType = void 0;\nvar ETrainType;\n(function (ETrainType) {\n    ETrainType[\"FRIGHT_TRAIN\"] = \"FRIGHT\";\n    ETrainType[\"METRO_TRAIN\"] = \"METRO\";\n})(ETrainType = exports.ETrainType || (exports.ETrainType = {}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvc3lzdGVtL3RyYWluL0VUcmFpblR5cGUudHMuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYiw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0Qsa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyxzQ0FBc0Msa0JBQWtCLEtBQUsiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92aW8tdi1yb2xlcGxheS1jbGllbnQvLi9zcmMvc3lzdGVtL3RyYWluL0VUcmFpblR5cGUudHM/MDE0MCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuRVRyYWluVHlwZSA9IHZvaWQgMDtcbnZhciBFVHJhaW5UeXBlO1xuKGZ1bmN0aW9uIChFVHJhaW5UeXBlKSB7XG4gICAgRVRyYWluVHlwZVtcIkZSSUdIVF9UUkFJTlwiXSA9IFwiRlJJR0hUXCI7XG4gICAgRVRyYWluVHlwZVtcIk1FVFJPX1RSQUlOXCJdID0gXCJNRVRST1wiO1xufSkoRVRyYWluVHlwZSA9IGV4cG9ydHMuRVRyYWluVHlwZSB8fCAoZXhwb3J0cy5FVHJhaW5UeXBlID0ge30pKTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/system/train/ETrainType.ts\n");

/***/ }),

/***/ "./src/system/train/PlayerTrainControl.ts":
/*!************************************************!*\
  !*** ./src/system/train/PlayerTrainControl.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.PlayerTrainControl = void 0;\nconst Utility_1 = __webpack_require__(/*! ../../utils/Utility */ \"./src/utils/Utility.ts\");\nconst SyncedTrains_1 = __webpack_require__(/*! ./SyncedTrains */ \"./src/system/train/SyncedTrains.ts\");\nconst Globals_1 = __webpack_require__(/*! ../../utils/Globals */ \"./src/utils/Globals.ts\");\nclass PlayerTrainControl {\n    static init() {\n        mp.events.add('render', PlayerTrainControl.onRender);\n    }\n    static activate(trainId, acceleration, deceleration, maxSpeed) {\n        PlayerTrainControl.trainId = trainId;\n        PlayerTrainControl.acceleration = acceleration + 0.0001;\n        PlayerTrainControl.deceleration = deceleration + 0.0001;\n        PlayerTrainControl.maxSpeed = maxSpeed + 0.0001;\n        const train = SyncedTrains_1.SyncedTrains.getTrain(PlayerTrainControl.trainId);\n        train?.setSpeed(0);\n        train?.setCruiseSpeed(0);\n        PlayerTrainControl.vehicleCamera = mp.cameras.new('default');\n        PlayerTrainControl.vehicleCamera.setActive(true);\n        mp.game.cam.renderScriptCams(true, false, 0, true, false);\n        PlayerTrainControl.onSyncTick();\n        PlayerTrainControl.intervalSyncTick = setInterval(() => {\n            PlayerTrainControl.onSyncTick();\n        }, Globals_1.Globals.TRAIN_SYNC_RATE);\n    }\n    static deactivate() {\n        PlayerTrainControl.trainId = null;\n        clearInterval(PlayerTrainControl.intervalSyncTick);\n        clearInterval(PlayerTrainControl.intervalTick);\n        PlayerTrainControl.vehicleCamera?.setActive(false);\n        PlayerTrainControl.vehicleCamera?.destroy();\n        PlayerTrainControl.vehicleCamera = null;\n        mp.game.cam.renderScriptCams(false, false, 0, true, false);\n    }\n    static onRender() {\n        if (PlayerTrainControl.trainId == null)\n            return;\n        const train = SyncedTrains_1.SyncedTrains.getTrain(PlayerTrainControl.trainId);\n        if (!train) {\n            PlayerTrainControl.deactivate();\n            return;\n        }\n        const speed = train.getSpeed();\n        const pos = train.getPosition();\n        mp.game.graphics.drawText(`${Math.round(speed * 3.6)} km/h`, [.5, .9], {\n            outline: true,\n            scale: [.5, .5],\n            font: 0,\n            color: [255, 255, 255, 255],\n            centre: true,\n        });\n        if (mp.game.controls.isControlPressed(0, 76)) {\n            mp.game.graphics.drawText(`BREAK`, [.5, .1], {\n                outline: true,\n                scale: [1.2, 1.2],\n                font: 0,\n                color: [255, 0, 0, 100],\n                centre: true,\n            });\n        }\n        mp.game.controls.disableControlAction(2, 261, true);\n        mp.game.controls.disableControlAction(2, 262, true);\n        mp.game.controls.disableControlAction(2, 14, true);\n        mp.game.controls.disableControlAction(2, 15, true);\n        mp.game.controls.disableControlAction(2, 16, true);\n        mp.game.controls.disableControlAction(2, 17, true);\n        mp.players.local.position = new mp.Vector3(pos.x, pos.y, pos.z - 3);\n        if (mp.game.controls.isControlPressed(2, 241)) {\n            PlayerTrainControl.radius += 2;\n        }\n        if (mp.game.controls.isControlPressed(2, 242)) {\n            PlayerTrainControl.radius -= 2;\n        }\n        if (PlayerTrainControl.radius > -13) {\n            PlayerTrainControl.radius = -13;\n        }\n        else if (PlayerTrainControl.radius < -25) {\n            PlayerTrainControl.radius = -25;\n        }\n        const xMagnitude = mp.game.controls.getDisabledControlNormal(0, 1);\n        const yMagnitude = mp.game.controls.getDisabledControlNormal(0, 2);\n        PlayerTrainControl.polarAngleDeg += xMagnitude * 7;\n        if (PlayerTrainControl.polarAngleDeg >= 360) {\n            PlayerTrainControl.polarAngleDeg = 0;\n        }\n        PlayerTrainControl.azimuthAngleDeg += yMagnitude * -7;\n        if (PlayerTrainControl.azimuthAngleDeg >= 179) {\n            PlayerTrainControl.azimuthAngleDeg = 179;\n        }\n        if (PlayerTrainControl.azimuthAngleDeg <= 1) {\n            PlayerTrainControl.azimuthAngleDeg = 1;\n        }\n        const nextCamLocation = Utility_1.Utility.polar3DToWorld3D(pos, PlayerTrainControl.radius, PlayerTrainControl.polarAngleDeg, PlayerTrainControl.azimuthAngleDeg);\n        PlayerTrainControl.vehicleCamera?.setCoord(nextCamLocation.x, nextCamLocation.y, nextCamLocation.z);\n        PlayerTrainControl.vehicleCamera?.pointAtCoord(pos.x, pos.y, pos.z);\n    }\n    ;\n    static onTick() {\n        if (PlayerTrainControl.trainId == null)\n            return;\n        const train = SyncedTrains_1.SyncedTrains.getTrain(PlayerTrainControl.trainId);\n        if (!train)\n            return;\n        const originalSpeed = train.getSpeed();\n        let speed = train.getSpeed();\n        if (mp.game.controls.isControlPressed(0, 76)) {\n            if (speed == 0)\n                return;\n            if (Math.abs(speed) <= PlayerTrainControl.deceleration * 1.5) {\n                train.setCruiseSpeed(0);\n                train.setSpeed(0);\n                return;\n            }\n            if (speed > 0) {\n                speed -= PlayerTrainControl.deceleration * 1.5;\n            }\n            else {\n                speed += PlayerTrainControl.deceleration * 1.5;\n            }\n        }\n        else if (mp.game.controls.isControlPressed(0, 71)) {\n            speed += PlayerTrainControl.acceleration;\n        }\n        else if (mp.game.controls.isControlPressed(0, 72)) {\n            speed -= PlayerTrainControl.deceleration;\n        }\n        if (speed > PlayerTrainControl.maxSpeed) {\n            speed = PlayerTrainControl.maxSpeed;\n        }\n        if (speed < -.95) {\n            speed = -.95;\n        }\n        if (speed != originalSpeed) {\n            train.setCruiseSpeed(speed);\n        }\n    }\n    static onSyncTick() {\n        if (PlayerTrainControl.trainId == null)\n            return;\n        const train = SyncedTrains_1.SyncedTrains.getTrain(PlayerTrainControl.trainId);\n        train?.onSyncTick();\n    }\n}\nexports.PlayerTrainControl = PlayerTrainControl;\nPlayerTrainControl.radius = -13;\nPlayerTrainControl.azimuthAngleDeg = 90;\nPlayerTrainControl.polarAngleDeg = 0;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvc3lzdGVtL3RyYWluL1BsYXllclRyYWluQ29udHJvbC50cy5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiLDhDQUE2QyxFQUFFLGFBQWEsRUFBQztBQUM3RCwwQkFBMEI7QUFDMUIsa0JBQWtCLG1CQUFPLENBQUMsbURBQXFCO0FBQy9DLHVCQUF1QixtQkFBTyxDQUFDLDBEQUFnQjtBQUMvQyxrQkFBa0IsbUJBQU8sQ0FBQyxtREFBcUI7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUMseUJBQXlCO0FBQzlEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCO0FBQzFCO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3Zpby12LXJvbGVwbGF5LWNsaWVudC8uL3NyYy9zeXN0ZW0vdHJhaW4vUGxheWVyVHJhaW5Db250cm9sLnRzPzYwOGUiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLlBsYXllclRyYWluQ29udHJvbCA9IHZvaWQgMDtcbmNvbnN0IFV0aWxpdHlfMSA9IHJlcXVpcmUoXCIuLi8uLi91dGlscy9VdGlsaXR5XCIpO1xuY29uc3QgU3luY2VkVHJhaW5zXzEgPSByZXF1aXJlKFwiLi9TeW5jZWRUcmFpbnNcIik7XG5jb25zdCBHbG9iYWxzXzEgPSByZXF1aXJlKFwiLi4vLi4vdXRpbHMvR2xvYmFsc1wiKTtcbmNsYXNzIFBsYXllclRyYWluQ29udHJvbCB7XG4gICAgc3RhdGljIGluaXQoKSB7XG4gICAgICAgIG1wLmV2ZW50cy5hZGQoJ3JlbmRlcicsIFBsYXllclRyYWluQ29udHJvbC5vblJlbmRlcik7XG4gICAgfVxuICAgIHN0YXRpYyBhY3RpdmF0ZSh0cmFpbklkLCBhY2NlbGVyYXRpb24sIGRlY2VsZXJhdGlvbiwgbWF4U3BlZWQpIHtcbiAgICAgICAgUGxheWVyVHJhaW5Db250cm9sLnRyYWluSWQgPSB0cmFpbklkO1xuICAgICAgICBQbGF5ZXJUcmFpbkNvbnRyb2wuYWNjZWxlcmF0aW9uID0gYWNjZWxlcmF0aW9uICsgMC4wMDAxO1xuICAgICAgICBQbGF5ZXJUcmFpbkNvbnRyb2wuZGVjZWxlcmF0aW9uID0gZGVjZWxlcmF0aW9uICsgMC4wMDAxO1xuICAgICAgICBQbGF5ZXJUcmFpbkNvbnRyb2wubWF4U3BlZWQgPSBtYXhTcGVlZCArIDAuMDAwMTtcbiAgICAgICAgY29uc3QgdHJhaW4gPSBTeW5jZWRUcmFpbnNfMS5TeW5jZWRUcmFpbnMuZ2V0VHJhaW4oUGxheWVyVHJhaW5Db250cm9sLnRyYWluSWQpO1xuICAgICAgICB0cmFpbj8uc2V0U3BlZWQoMCk7XG4gICAgICAgIHRyYWluPy5zZXRDcnVpc2VTcGVlZCgwKTtcbiAgICAgICAgUGxheWVyVHJhaW5Db250cm9sLnZlaGljbGVDYW1lcmEgPSBtcC5jYW1lcmFzLm5ldygnZGVmYXVsdCcpO1xuICAgICAgICBQbGF5ZXJUcmFpbkNvbnRyb2wudmVoaWNsZUNhbWVyYS5zZXRBY3RpdmUodHJ1ZSk7XG4gICAgICAgIG1wLmdhbWUuY2FtLnJlbmRlclNjcmlwdENhbXModHJ1ZSwgZmFsc2UsIDAsIHRydWUsIGZhbHNlKTtcbiAgICAgICAgUGxheWVyVHJhaW5Db250cm9sLm9uU3luY1RpY2soKTtcbiAgICAgICAgUGxheWVyVHJhaW5Db250cm9sLmludGVydmFsU3luY1RpY2sgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICAgICAgICBQbGF5ZXJUcmFpbkNvbnRyb2wub25TeW5jVGljaygpO1xuICAgICAgICB9LCBHbG9iYWxzXzEuR2xvYmFscy5UUkFJTl9TWU5DX1JBVEUpO1xuICAgIH1cbiAgICBzdGF0aWMgZGVhY3RpdmF0ZSgpIHtcbiAgICAgICAgUGxheWVyVHJhaW5Db250cm9sLnRyYWluSWQgPSBudWxsO1xuICAgICAgICBjbGVhckludGVydmFsKFBsYXllclRyYWluQ29udHJvbC5pbnRlcnZhbFN5bmNUaWNrKTtcbiAgICAgICAgY2xlYXJJbnRlcnZhbChQbGF5ZXJUcmFpbkNvbnRyb2wuaW50ZXJ2YWxUaWNrKTtcbiAgICAgICAgUGxheWVyVHJhaW5Db250cm9sLnZlaGljbGVDYW1lcmE/LnNldEFjdGl2ZShmYWxzZSk7XG4gICAgICAgIFBsYXllclRyYWluQ29udHJvbC52ZWhpY2xlQ2FtZXJhPy5kZXN0cm95KCk7XG4gICAgICAgIFBsYXllclRyYWluQ29udHJvbC52ZWhpY2xlQ2FtZXJhID0gbnVsbDtcbiAgICAgICAgbXAuZ2FtZS5jYW0ucmVuZGVyU2NyaXB0Q2FtcyhmYWxzZSwgZmFsc2UsIDAsIHRydWUsIGZhbHNlKTtcbiAgICB9XG4gICAgc3RhdGljIG9uUmVuZGVyKCkge1xuICAgICAgICBpZiAoUGxheWVyVHJhaW5Db250cm9sLnRyYWluSWQgPT0gbnVsbClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgY29uc3QgdHJhaW4gPSBTeW5jZWRUcmFpbnNfMS5TeW5jZWRUcmFpbnMuZ2V0VHJhaW4oUGxheWVyVHJhaW5Db250cm9sLnRyYWluSWQpO1xuICAgICAgICBpZiAoIXRyYWluKSB7XG4gICAgICAgICAgICBQbGF5ZXJUcmFpbkNvbnRyb2wuZGVhY3RpdmF0ZSgpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHNwZWVkID0gdHJhaW4uZ2V0U3BlZWQoKTtcbiAgICAgICAgY29uc3QgcG9zID0gdHJhaW4uZ2V0UG9zaXRpb24oKTtcbiAgICAgICAgbXAuZ2FtZS5ncmFwaGljcy5kcmF3VGV4dChgJHtNYXRoLnJvdW5kKHNwZWVkICogMy42KX0ga20vaGAsIFsuNSwgLjldLCB7XG4gICAgICAgICAgICBvdXRsaW5lOiB0cnVlLFxuICAgICAgICAgICAgc2NhbGU6IFsuNSwgLjVdLFxuICAgICAgICAgICAgZm9udDogMCxcbiAgICAgICAgICAgIGNvbG9yOiBbMjU1LCAyNTUsIDI1NSwgMjU1XSxcbiAgICAgICAgICAgIGNlbnRyZTogdHJ1ZSxcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChtcC5nYW1lLmNvbnRyb2xzLmlzQ29udHJvbFByZXNzZWQoMCwgNzYpKSB7XG4gICAgICAgICAgICBtcC5nYW1lLmdyYXBoaWNzLmRyYXdUZXh0KGBCUkVBS2AsIFsuNSwgLjFdLCB7XG4gICAgICAgICAgICAgICAgb3V0bGluZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBzY2FsZTogWzEuMiwgMS4yXSxcbiAgICAgICAgICAgICAgICBmb250OiAwLFxuICAgICAgICAgICAgICAgIGNvbG9yOiBbMjU1LCAwLCAwLCAxMDBdLFxuICAgICAgICAgICAgICAgIGNlbnRyZTogdHJ1ZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIG1wLmdhbWUuY29udHJvbHMuZGlzYWJsZUNvbnRyb2xBY3Rpb24oMiwgMjYxLCB0cnVlKTtcbiAgICAgICAgbXAuZ2FtZS5jb250cm9scy5kaXNhYmxlQ29udHJvbEFjdGlvbigyLCAyNjIsIHRydWUpO1xuICAgICAgICBtcC5nYW1lLmNvbnRyb2xzLmRpc2FibGVDb250cm9sQWN0aW9uKDIsIDE0LCB0cnVlKTtcbiAgICAgICAgbXAuZ2FtZS5jb250cm9scy5kaXNhYmxlQ29udHJvbEFjdGlvbigyLCAxNSwgdHJ1ZSk7XG4gICAgICAgIG1wLmdhbWUuY29udHJvbHMuZGlzYWJsZUNvbnRyb2xBY3Rpb24oMiwgMTYsIHRydWUpO1xuICAgICAgICBtcC5nYW1lLmNvbnRyb2xzLmRpc2FibGVDb250cm9sQWN0aW9uKDIsIDE3LCB0cnVlKTtcbiAgICAgICAgbXAucGxheWVycy5sb2NhbC5wb3NpdGlvbiA9IG5ldyBtcC5WZWN0b3IzKHBvcy54LCBwb3MueSwgcG9zLnogLSAzKTtcbiAgICAgICAgaWYgKG1wLmdhbWUuY29udHJvbHMuaXNDb250cm9sUHJlc3NlZCgyLCAyNDEpKSB7XG4gICAgICAgICAgICBQbGF5ZXJUcmFpbkNvbnRyb2wucmFkaXVzICs9IDI7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1wLmdhbWUuY29udHJvbHMuaXNDb250cm9sUHJlc3NlZCgyLCAyNDIpKSB7XG4gICAgICAgICAgICBQbGF5ZXJUcmFpbkNvbnRyb2wucmFkaXVzIC09IDI7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKFBsYXllclRyYWluQ29udHJvbC5yYWRpdXMgPiAtMTMpIHtcbiAgICAgICAgICAgIFBsYXllclRyYWluQ29udHJvbC5yYWRpdXMgPSAtMTM7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoUGxheWVyVHJhaW5Db250cm9sLnJhZGl1cyA8IC0yNSkge1xuICAgICAgICAgICAgUGxheWVyVHJhaW5Db250cm9sLnJhZGl1cyA9IC0yNTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB4TWFnbml0dWRlID0gbXAuZ2FtZS5jb250cm9scy5nZXREaXNhYmxlZENvbnRyb2xOb3JtYWwoMCwgMSk7XG4gICAgICAgIGNvbnN0IHlNYWduaXR1ZGUgPSBtcC5nYW1lLmNvbnRyb2xzLmdldERpc2FibGVkQ29udHJvbE5vcm1hbCgwLCAyKTtcbiAgICAgICAgUGxheWVyVHJhaW5Db250cm9sLnBvbGFyQW5nbGVEZWcgKz0geE1hZ25pdHVkZSAqIDc7XG4gICAgICAgIGlmIChQbGF5ZXJUcmFpbkNvbnRyb2wucG9sYXJBbmdsZURlZyA+PSAzNjApIHtcbiAgICAgICAgICAgIFBsYXllclRyYWluQ29udHJvbC5wb2xhckFuZ2xlRGVnID0gMDtcbiAgICAgICAgfVxuICAgICAgICBQbGF5ZXJUcmFpbkNvbnRyb2wuYXppbXV0aEFuZ2xlRGVnICs9IHlNYWduaXR1ZGUgKiAtNztcbiAgICAgICAgaWYgKFBsYXllclRyYWluQ29udHJvbC5hemltdXRoQW5nbGVEZWcgPj0gMTc5KSB7XG4gICAgICAgICAgICBQbGF5ZXJUcmFpbkNvbnRyb2wuYXppbXV0aEFuZ2xlRGVnID0gMTc5O1xuICAgICAgICB9XG4gICAgICAgIGlmIChQbGF5ZXJUcmFpbkNvbnRyb2wuYXppbXV0aEFuZ2xlRGVnIDw9IDEpIHtcbiAgICAgICAgICAgIFBsYXllclRyYWluQ29udHJvbC5hemltdXRoQW5nbGVEZWcgPSAxO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG5leHRDYW1Mb2NhdGlvbiA9IFV0aWxpdHlfMS5VdGlsaXR5LnBvbGFyM0RUb1dvcmxkM0QocG9zLCBQbGF5ZXJUcmFpbkNvbnRyb2wucmFkaXVzLCBQbGF5ZXJUcmFpbkNvbnRyb2wucG9sYXJBbmdsZURlZywgUGxheWVyVHJhaW5Db250cm9sLmF6aW11dGhBbmdsZURlZyk7XG4gICAgICAgIFBsYXllclRyYWluQ29udHJvbC52ZWhpY2xlQ2FtZXJhPy5zZXRDb29yZChuZXh0Q2FtTG9jYXRpb24ueCwgbmV4dENhbUxvY2F0aW9uLnksIG5leHRDYW1Mb2NhdGlvbi56KTtcbiAgICAgICAgUGxheWVyVHJhaW5Db250cm9sLnZlaGljbGVDYW1lcmE/LnBvaW50QXRDb29yZChwb3MueCwgcG9zLnksIHBvcy56KTtcbiAgICB9XG4gICAgO1xuICAgIHN0YXRpYyBvblRpY2soKSB7XG4gICAgICAgIGlmIChQbGF5ZXJUcmFpbkNvbnRyb2wudHJhaW5JZCA9PSBudWxsKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBjb25zdCB0cmFpbiA9IFN5bmNlZFRyYWluc18xLlN5bmNlZFRyYWlucy5nZXRUcmFpbihQbGF5ZXJUcmFpbkNvbnRyb2wudHJhaW5JZCk7XG4gICAgICAgIGlmICghdHJhaW4pXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGNvbnN0IG9yaWdpbmFsU3BlZWQgPSB0cmFpbi5nZXRTcGVlZCgpO1xuICAgICAgICBsZXQgc3BlZWQgPSB0cmFpbi5nZXRTcGVlZCgpO1xuICAgICAgICBpZiAobXAuZ2FtZS5jb250cm9scy5pc0NvbnRyb2xQcmVzc2VkKDAsIDc2KSkge1xuICAgICAgICAgICAgaWYgKHNwZWVkID09IDApXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgaWYgKE1hdGguYWJzKHNwZWVkKSA8PSBQbGF5ZXJUcmFpbkNvbnRyb2wuZGVjZWxlcmF0aW9uICogMS41KSB7XG4gICAgICAgICAgICAgICAgdHJhaW4uc2V0Q3J1aXNlU3BlZWQoMCk7XG4gICAgICAgICAgICAgICAgdHJhaW4uc2V0U3BlZWQoMCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHNwZWVkID4gMCkge1xuICAgICAgICAgICAgICAgIHNwZWVkIC09IFBsYXllclRyYWluQ29udHJvbC5kZWNlbGVyYXRpb24gKiAxLjU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBzcGVlZCArPSBQbGF5ZXJUcmFpbkNvbnRyb2wuZGVjZWxlcmF0aW9uICogMS41O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG1wLmdhbWUuY29udHJvbHMuaXNDb250cm9sUHJlc3NlZCgwLCA3MSkpIHtcbiAgICAgICAgICAgIHNwZWVkICs9IFBsYXllclRyYWluQ29udHJvbC5hY2NlbGVyYXRpb247XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobXAuZ2FtZS5jb250cm9scy5pc0NvbnRyb2xQcmVzc2VkKDAsIDcyKSkge1xuICAgICAgICAgICAgc3BlZWQgLT0gUGxheWVyVHJhaW5Db250cm9sLmRlY2VsZXJhdGlvbjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc3BlZWQgPiBQbGF5ZXJUcmFpbkNvbnRyb2wubWF4U3BlZWQpIHtcbiAgICAgICAgICAgIHNwZWVkID0gUGxheWVyVHJhaW5Db250cm9sLm1heFNwZWVkO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzcGVlZCA8IC0uOTUpIHtcbiAgICAgICAgICAgIHNwZWVkID0gLS45NTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc3BlZWQgIT0gb3JpZ2luYWxTcGVlZCkge1xuICAgICAgICAgICAgdHJhaW4uc2V0Q3J1aXNlU3BlZWQoc3BlZWQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBvblN5bmNUaWNrKCkge1xuICAgICAgICBpZiAoUGxheWVyVHJhaW5Db250cm9sLnRyYWluSWQgPT0gbnVsbClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgY29uc3QgdHJhaW4gPSBTeW5jZWRUcmFpbnNfMS5TeW5jZWRUcmFpbnMuZ2V0VHJhaW4oUGxheWVyVHJhaW5Db250cm9sLnRyYWluSWQpO1xuICAgICAgICB0cmFpbj8ub25TeW5jVGljaygpO1xuICAgIH1cbn1cbmV4cG9ydHMuUGxheWVyVHJhaW5Db250cm9sID0gUGxheWVyVHJhaW5Db250cm9sO1xuUGxheWVyVHJhaW5Db250cm9sLnJhZGl1cyA9IC0xMztcblBsYXllclRyYWluQ29udHJvbC5hemltdXRoQW5nbGVEZWcgPSA5MDtcblBsYXllclRyYWluQ29udHJvbC5wb2xhckFuZ2xlRGVnID0gMDtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/system/train/PlayerTrainControl.ts\n");

/***/ }),

/***/ "./src/system/train/SyncedTrains.ts":
/*!******************************************!*\
  !*** ./src/system/train/SyncedTrains.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.SyncedTrains = void 0;\nconst Utility_1 = __webpack_require__(/*! ../../utils/Utility */ \"./src/utils/Utility.ts\");\nconst CommunicationManager_1 = __webpack_require__(/*! ../../utils/CommunicationManager */ \"./src/utils/CommunicationManager.ts\");\nconst TrainHandler_1 = __webpack_require__(/*! ./TrainHandler */ \"./src/system/train/TrainHandler.ts\");\nconst AmbientTrain_1 = __webpack_require__(/*! ./AmbientTrain */ \"./src/system/train/AmbientTrain.ts\");\nclass SyncedTrains {\n    static async init() {\n        mp.game.invoke(\"0x736A718577F39C7D\");\n        if (mp.storage.data.trainHandles) {\n            if (typeof mp.storage.data.trainHandles == 'object')\n                mp.storage.data.trainHandles.forEach((handle) => {\n                    if (mp.game.invoke('0xAD464F2E18836BFC', handle)) {\n                        mp.game.vehicle.deleteMissionTrain(handle);\n                    }\n                });\n        }\n        mp.storage.data.trainHandles = [];\n        mp.storage.flush();\n        CommunicationManager_1.CommunicationManager.addServerEvent('TrainSync:Create', (id, type) => {\n            SyncedTrains.createTrain(id, type);\n        });\n        CommunicationManager_1.CommunicationManager.addServerEvent('TrainSync:SetTrack', SyncedTrains.setTrainTrack);\n        CommunicationManager_1.CommunicationManager.addServerEvent('TrainSync:Update', SyncedTrains.updateTrain);\n        CommunicationManager_1.CommunicationManager.addServerEvent('TrainSync:Destroy', SyncedTrains.destroyTrain);\n    }\n    static getTrain(id) {\n        return SyncedTrains.syncedTrains.get(id >> 0);\n    }\n    static async createTrain(id, type) {\n        const results = await Promise.all(['freight', 'freightcar', 'freightcar2', 'freightgrain', 'freightcont1', 'freightcont2', 'freighttrailer', 'tankercar', 'metrotrain', 's_m_m_lsmetro_01'].map(name => {\n            return Utility_1.Utility.requestModelAsync(mp.game.joaat(name), 60 * 1000);\n        }));\n        if (results.includes(false)) {\n            mp.gui.chat.push('ERROR: Zugmodelle konnten nicht geladen werden! @SyncedTrains.ts');\n            mp.gui.chat.push('berprfe dein GTA V auf Fehler!');\n        }\n        else {\n            if (SyncedTrains.syncedTrains.has(id))\n                return;\n            SyncedTrains.syncedTrains.set(id, new TrainHandler_1.TrainHandler(id, type));\n        }\n    }\n    static setTrainTrack(id, track) {\n        SyncedTrains.syncedTrains.get(id)?.setTrack(track);\n    }\n    static updateTrain(id, data) {\n        if (AmbientTrain_1.AmbientTrain.getTrainId() == id) {\n            Utility_1.Utility.debugChat('TR_UP_ERR', `ERR Cant sync on NetHandler! ID = ${id}`, 100000);\n            return;\n        }\n        const train = SyncedTrains.syncedTrains.get(id);\n        if (!train) {\n            Utility_1.Utility.debugChat('TR_UP_ERR', `ERR Train does not exist! ID = ${id}`, 10000);\n            return;\n        }\n        train.incomingSyncData(data);\n    }\n    static destroyTrain(id) {\n        SyncedTrains.syncedTrains.get(id)?.destroy();\n        SyncedTrains.syncedTrains.delete(id);\n    }\n    static onRender() {\n        mp.game.graphics.drawText(JSON.stringify(SyncedTrains.debug), [.5, .1], {\n            outline: true,\n            scale: [.2, .2],\n            font: 0,\n            color: [255, 0, 0, 100],\n            centre: true,\n        });\n    }\n}\nexports.SyncedTrains = SyncedTrains;\nSyncedTrains.syncedTrains = new Map();\nSyncedTrains.debug = {};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvc3lzdGVtL3RyYWluL1N5bmNlZFRyYWlucy50cy5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiLDhDQUE2QyxFQUFFLGFBQWEsRUFBQztBQUM3RCxvQkFBb0I7QUFDcEIsa0JBQWtCLG1CQUFPLENBQUMsbURBQXFCO0FBQy9DLCtCQUErQixtQkFBTyxDQUFDLDZFQUFrQztBQUN6RSx1QkFBdUIsbUJBQU8sQ0FBQywwREFBZ0I7QUFDL0MsdUJBQXVCLG1CQUFPLENBQUMsMERBQWdCO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBGQUEwRixHQUFHO0FBQzdGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUZBQXVGLEdBQUc7QUFDMUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxvQkFBb0I7QUFDcEI7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3Zpby12LXJvbGVwbGF5LWNsaWVudC8uL3NyYy9zeXN0ZW0vdHJhaW4vU3luY2VkVHJhaW5zLnRzPzNjNWMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLlN5bmNlZFRyYWlucyA9IHZvaWQgMDtcbmNvbnN0IFV0aWxpdHlfMSA9IHJlcXVpcmUoXCIuLi8uLi91dGlscy9VdGlsaXR5XCIpO1xuY29uc3QgQ29tbXVuaWNhdGlvbk1hbmFnZXJfMSA9IHJlcXVpcmUoXCIuLi8uLi91dGlscy9Db21tdW5pY2F0aW9uTWFuYWdlclwiKTtcbmNvbnN0IFRyYWluSGFuZGxlcl8xID0gcmVxdWlyZShcIi4vVHJhaW5IYW5kbGVyXCIpO1xuY29uc3QgQW1iaWVudFRyYWluXzEgPSByZXF1aXJlKFwiLi9BbWJpZW50VHJhaW5cIik7XG5jbGFzcyBTeW5jZWRUcmFpbnMge1xuICAgIHN0YXRpYyBhc3luYyBpbml0KCkge1xuICAgICAgICBtcC5nYW1lLmludm9rZShcIjB4NzM2QTcxODU3N0YzOUM3RFwiKTtcbiAgICAgICAgaWYgKG1wLnN0b3JhZ2UuZGF0YS50cmFpbkhhbmRsZXMpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgbXAuc3RvcmFnZS5kYXRhLnRyYWluSGFuZGxlcyA9PSAnb2JqZWN0JylcbiAgICAgICAgICAgICAgICBtcC5zdG9yYWdlLmRhdGEudHJhaW5IYW5kbGVzLmZvckVhY2goKGhhbmRsZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAobXAuZ2FtZS5pbnZva2UoJzB4QUQ0NjRGMkUxODgzNkJGQycsIGhhbmRsZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1wLmdhbWUudmVoaWNsZS5kZWxldGVNaXNzaW9uVHJhaW4oaGFuZGxlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIG1wLnN0b3JhZ2UuZGF0YS50cmFpbkhhbmRsZXMgPSBbXTtcbiAgICAgICAgbXAuc3RvcmFnZS5mbHVzaCgpO1xuICAgICAgICBDb21tdW5pY2F0aW9uTWFuYWdlcl8xLkNvbW11bmljYXRpb25NYW5hZ2VyLmFkZFNlcnZlckV2ZW50KCdUcmFpblN5bmM6Q3JlYXRlJywgKGlkLCB0eXBlKSA9PiB7XG4gICAgICAgICAgICBTeW5jZWRUcmFpbnMuY3JlYXRlVHJhaW4oaWQsIHR5cGUpO1xuICAgICAgICB9KTtcbiAgICAgICAgQ29tbXVuaWNhdGlvbk1hbmFnZXJfMS5Db21tdW5pY2F0aW9uTWFuYWdlci5hZGRTZXJ2ZXJFdmVudCgnVHJhaW5TeW5jOlNldFRyYWNrJywgU3luY2VkVHJhaW5zLnNldFRyYWluVHJhY2spO1xuICAgICAgICBDb21tdW5pY2F0aW9uTWFuYWdlcl8xLkNvbW11bmljYXRpb25NYW5hZ2VyLmFkZFNlcnZlckV2ZW50KCdUcmFpblN5bmM6VXBkYXRlJywgU3luY2VkVHJhaW5zLnVwZGF0ZVRyYWluKTtcbiAgICAgICAgQ29tbXVuaWNhdGlvbk1hbmFnZXJfMS5Db21tdW5pY2F0aW9uTWFuYWdlci5hZGRTZXJ2ZXJFdmVudCgnVHJhaW5TeW5jOkRlc3Ryb3knLCBTeW5jZWRUcmFpbnMuZGVzdHJveVRyYWluKTtcbiAgICB9XG4gICAgc3RhdGljIGdldFRyYWluKGlkKSB7XG4gICAgICAgIHJldHVybiBTeW5jZWRUcmFpbnMuc3luY2VkVHJhaW5zLmdldChpZCA+PiAwKTtcbiAgICB9XG4gICAgc3RhdGljIGFzeW5jIGNyZWF0ZVRyYWluKGlkLCB0eXBlKSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCBQcm9taXNlLmFsbChbJ2ZyZWlnaHQnLCAnZnJlaWdodGNhcicsICdmcmVpZ2h0Y2FyMicsICdmcmVpZ2h0Z3JhaW4nLCAnZnJlaWdodGNvbnQxJywgJ2ZyZWlnaHRjb250MicsICdmcmVpZ2h0dHJhaWxlcicsICd0YW5rZXJjYXInLCAnbWV0cm90cmFpbicsICdzX21fbV9sc21ldHJvXzAxJ10ubWFwKG5hbWUgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIFV0aWxpdHlfMS5VdGlsaXR5LnJlcXVlc3RNb2RlbEFzeW5jKG1wLmdhbWUuam9hYXQobmFtZSksIDYwICogMTAwMCk7XG4gICAgICAgIH0pKTtcbiAgICAgICAgaWYgKHJlc3VsdHMuaW5jbHVkZXMoZmFsc2UpKSB7XG4gICAgICAgICAgICBtcC5ndWkuY2hhdC5wdXNoKCdFUlJPUjogWnVnbW9kZWxsZSBrb25udGVuIG5pY2h0IGdlbGFkZW4gd2VyZGVuISBAU3luY2VkVHJhaW5zLnRzJyk7XG4gICAgICAgICAgICBtcC5ndWkuY2hhdC5wdXNoKCfDnGJlcnByw7xmZSBkZWluIEdUQSBWIGF1ZiBGZWhsZXIhJyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAoU3luY2VkVHJhaW5zLnN5bmNlZFRyYWlucy5oYXMoaWQpKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIFN5bmNlZFRyYWlucy5zeW5jZWRUcmFpbnMuc2V0KGlkLCBuZXcgVHJhaW5IYW5kbGVyXzEuVHJhaW5IYW5kbGVyKGlkLCB0eXBlKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIHNldFRyYWluVHJhY2soaWQsIHRyYWNrKSB7XG4gICAgICAgIFN5bmNlZFRyYWlucy5zeW5jZWRUcmFpbnMuZ2V0KGlkKT8uc2V0VHJhY2sodHJhY2spO1xuICAgIH1cbiAgICBzdGF0aWMgdXBkYXRlVHJhaW4oaWQsIGRhdGEpIHtcbiAgICAgICAgaWYgKEFtYmllbnRUcmFpbl8xLkFtYmllbnRUcmFpbi5nZXRUcmFpbklkKCkgPT0gaWQpIHtcbiAgICAgICAgICAgIFV0aWxpdHlfMS5VdGlsaXR5LmRlYnVnQ2hhdCgnVFJfVVBfRVJSJywgYEVSUiBDYW50IHN5bmMgb24gTmV0SGFuZGxlciEgSUQgPSAke2lkfWAsIDEwMDAwMCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdHJhaW4gPSBTeW5jZWRUcmFpbnMuc3luY2VkVHJhaW5zLmdldChpZCk7XG4gICAgICAgIGlmICghdHJhaW4pIHtcbiAgICAgICAgICAgIFV0aWxpdHlfMS5VdGlsaXR5LmRlYnVnQ2hhdCgnVFJfVVBfRVJSJywgYEVSUiBUcmFpbiBkb2VzIG5vdCBleGlzdCEgSUQgPSAke2lkfWAsIDEwMDAwKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0cmFpbi5pbmNvbWluZ1N5bmNEYXRhKGRhdGEpO1xuICAgIH1cbiAgICBzdGF0aWMgZGVzdHJveVRyYWluKGlkKSB7XG4gICAgICAgIFN5bmNlZFRyYWlucy5zeW5jZWRUcmFpbnMuZ2V0KGlkKT8uZGVzdHJveSgpO1xuICAgICAgICBTeW5jZWRUcmFpbnMuc3luY2VkVHJhaW5zLmRlbGV0ZShpZCk7XG4gICAgfVxuICAgIHN0YXRpYyBvblJlbmRlcigpIHtcbiAgICAgICAgbXAuZ2FtZS5ncmFwaGljcy5kcmF3VGV4dChKU09OLnN0cmluZ2lmeShTeW5jZWRUcmFpbnMuZGVidWcpLCBbLjUsIC4xXSwge1xuICAgICAgICAgICAgb3V0bGluZTogdHJ1ZSxcbiAgICAgICAgICAgIHNjYWxlOiBbLjIsIC4yXSxcbiAgICAgICAgICAgIGZvbnQ6IDAsXG4gICAgICAgICAgICBjb2xvcjogWzI1NSwgMCwgMCwgMTAwXSxcbiAgICAgICAgICAgIGNlbnRyZTogdHJ1ZSxcbiAgICAgICAgfSk7XG4gICAgfVxufVxuZXhwb3J0cy5TeW5jZWRUcmFpbnMgPSBTeW5jZWRUcmFpbnM7XG5TeW5jZWRUcmFpbnMuc3luY2VkVHJhaW5zID0gbmV3IE1hcCgpO1xuU3luY2VkVHJhaW5zLmRlYnVnID0ge307XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/system/train/SyncedTrains.ts\n");

/***/ }),

/***/ "./src/system/train/TrainHandler.ts":
/*!******************************************!*\
  !*** ./src/system/train/TrainHandler.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.TrainHandler = void 0;\nconst ETrainType_1 = __webpack_require__(/*! ./ETrainType */ \"./src/system/train/ETrainType.ts\");\nconst CommunicationManager_1 = __webpack_require__(/*! ../../utils/CommunicationManager */ \"./src/utils/CommunicationManager.ts\");\nconst Utility_1 = __webpack_require__(/*! ../../utils/Utility */ \"./src/utils/Utility.ts\");\nclass TrainHandler {\n    constructor(id, type) {\n        this.speed = 0;\n        this.track = -1;\n        this.owner = '';\n        this.id = id;\n        this.type = type;\n        const modelsLoaded = ['freight', 'freightcar', 'freightcar2', 'freightgrain', 'freightcont1', 'freightcont2', 'freighttrailer', 'tankercar', 'metrotrain', 's_m_m_lsmetro_01'].map((name) => {\n            return mp.game.streaming.hasModelLoaded(mp.game.joaat(name));\n        });\n        if (modelsLoaded.includes(false)) {\n            mp.console.logError('Zugmodels nicht korrekt geladen! @TrainHandler.ts#20', true, true);\n            throw 'Zugmodels nicht korrekt geladen! @TrainHandler.ts#20';\n        }\n        switch (type) {\n            case ETrainType_1.ETrainType.FRIGHT_TRAIN:\n                this.trainVehicleHandle = mp.game.vehicle.createMissionTrain(23, 670.2056, -685.7708, 25.15311, true);\n                break;\n            case ETrainType_1.ETrainType.METRO_TRAIN:\n                this.trainVehicleHandle = mp.game.vehicle.createMissionTrain(25, 247.9364, -1198.597, 37.4482, true);\n                break;\n        }\n        mp.game.invoke(\"0xAD738C3085FE7E11\", this.trainVehicleHandle, true, false);\n        mp.storage.data.trainHandles.push(this.trainVehicleHandle);\n        mp.storage.flush();\n        this.setSpeed(0);\n        this.setCruiseSpeed(0);\n    }\n    setOwnerName(name) {\n        this.owner = name;\n    }\n    setSpeed(speed) {\n        if (speed < 0)\n            return;\n        mp.game.invoke(\"0xAA0BC91BE0B796E3\", this.trainVehicleHandle, speed);\n        this.speed = speed;\n    }\n    setCruiseSpeed(speed) {\n        mp.game.invoke(\"0x16469284DB8C62B5\", this.trainVehicleHandle, speed);\n        this.speed = speed;\n    }\n    getSpeed() {\n        const forwardVector = mp.game.invokeVector3(\"0x0A794A5A57F8DF91\", this.trainVehicleHandle);\n        const velocityVector = mp.game.invokeVector3(\"0x4805D2B1D8CF94A9\", this.trainVehicleHandle);\n        let velocityMagnitude = Math.sqrt(velocityVector.x ** 2 + velocityVector.y ** 2 + velocityVector.z ** 2);\n        const dotP = velocityVector.x * forwardVector.x + velocityVector.y * forwardVector.y + velocityVector.z * forwardVector.z;\n        const magnitudeP = velocityMagnitude * Math.sqrt(forwardVector.x ** 2 + forwardVector.y ** 2 + forwardVector.z ** 2);\n        const angle = Math.acos(dotP / magnitudeP);\n        if (Math.abs(angle) > (Math.PI / 2)) {\n            velocityMagnitude = -velocityMagnitude;\n        }\n        return velocityMagnitude;\n    }\n    getVelocity() {\n        return mp.game.invokeVector3(\"0x4805D2B1D8CF94A9\", this.trainVehicleHandle);\n    }\n    setVelocity(velocity) {\n        mp.game.invokeVector3(\"0x1C99BB7B6E96D16F\", velocity.x, velocity.y, velocity.z);\n    }\n    setPosition(position) {\n        const { x, y, z } = position;\n        mp.game.invoke(\"0x591CA673AA6AB736\", this.trainVehicleHandle, x, y, z);\n    }\n    getPosition() {\n        return mp.game.invokeVector3(\"0x3FEF770D40960D5A\", this.trainVehicleHandle, true);\n    }\n    setTrack(trackId) {\n        mp.game.invoke(\"0xFD813BB7DB977F20\", trackId, true);\n        this.track = trackId;\n    }\n    getTrack() {\n        return this.track;\n    }\n    getType() {\n        return this.type;\n    }\n    destroy() {\n        mp.game.vehicle.deleteMissionTrain(this.trainVehicleHandle);\n    }\n    getHandle() {\n        return this.trainVehicleHandle;\n    }\n    onSyncTick() {\n        const position = this.getPosition();\n        const buffer = new ArrayBuffer(32 / 8 * 4);\n        const int32View = new Int32Array(buffer);\n        int32View[0] = (this.getSpeed() * Math.pow(10, 4)) >> 0;\n        int32View[1] = (position.x * Math.pow(10, 4)) >> 0;\n        int32View[2] = (position.y * Math.pow(10, 4)) >> 0;\n        int32View[3] = (position.z * Math.pow(10, 4)) >> 0;\n        CommunicationManager_1.CommunicationManager.triggerServer('TrainSync:Update', this.id, buffer);\n    }\n    incomingSyncData(data) {\n        const int32View = new Int32Array(data);\n        if (mp.game.invoke('0xAD464F2E18836BFC', this.trainVehicleHandle)) {\n            const result = [];\n            int32View.forEach((num, index) => {\n                result[index] = num / Math.pow(10, 4);\n            });\n            const [speed, px, py, pz,] = result;\n            const position = new mp.Vector3(px, py, pz);\n            const currentPosition = this.getPosition();\n            const dist = Utility_1.Utility.vdist2(position, currentPosition, true);\n            let speedDiff = 0;\n            const forwardVector = mp.game.invokeVector3(\"0x0A794A5A57F8DF91\", this.trainVehicleHandle);\n            const positionDifferenceVector = new mp.Vector3(position.x - currentPosition.x, position.y - currentPosition.y, position.z - currentPosition.z);\n            const positionDiffMagnitude = Math.sqrt(positionDifferenceVector.x ** 2 + positionDifferenceVector.y ** 2 + positionDifferenceVector.z ** 2);\n            const dotP = positionDifferenceVector.x * forwardVector.x + positionDifferenceVector.y * forwardVector.y + positionDifferenceVector.z * forwardVector.z;\n            const magnitudeP = positionDiffMagnitude * Math.sqrt(forwardVector.x ** 2 + forwardVector.y ** 2 + forwardVector.z ** 2);\n            const angle = Math.acos(dotP / magnitudeP);\n            speedDiff = positionDiffMagnitude;\n            if (Math.abs(angle) > (Math.PI / 2)) {\n                speedDiff = -speedDiff;\n            }\n            if (dist > Utility_1.Utility.metersToVDist2Unit(5)) {\n                Utility_1.Utility.debugChat('dist' + this.id, `Dist: ${Math.round(dist)} Angle: ${Math.round(angle * (180 / Math.PI) * 100) / 100}, ${Math.round(angle * 100) / 100} SpeedDiff: ${Math.round(speedDiff * 100) / 100} Y: ${(mp.storage.data.testServer['BETA_TRAIN_SPEED_Y'] || 1.5)}`, 1);\n                Utility_1.Utility.debugChat('dist_pos1_' + this.id, `${Math.round(position.x)} ${Math.round(position.y)} ${Math.round(position.z)}`, 1);\n                Utility_1.Utility.debugChat('dist_pos2_' + this.id, `${Math.round(currentPosition.x)} ${Math.round(currentPosition.y)} ${Math.round(currentPosition.z)}`, 1);\n                if (Utility_1.Utility.vdist2(mp.players.local.position, position) > 2500 ** 2) {\n                    this.setPosition(position);\n                    speedDiff = 0;\n                }\n            }\n            this.setSpeed(speed + speedDiff);\n            this.setCruiseSpeed(speed + speedDiff);\n        }\n    }\n}\nexports.TrainHandler = TrainHandler;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvc3lzdGVtL3RyYWluL1RyYWluSGFuZGxlci50cy5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiLDhDQUE2QyxFQUFFLGFBQWEsRUFBQztBQUM3RCxvQkFBb0I7QUFDcEIscUJBQXFCLG1CQUFPLENBQUMsc0RBQWM7QUFDM0MsK0JBQStCLG1CQUFPLENBQUMsNkVBQWtDO0FBQ3pFLGtCQUFrQixtQkFBTyxDQUFDLG1EQUFxQjtBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixVQUFVO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUVBQXVFLGtCQUFrQixTQUFTLGdEQUFnRCxJQUFJLCtCQUErQixhQUFhLG1DQUFtQyxLQUFLLDBEQUEwRDtBQUNwUyx1RUFBdUUsd0JBQXdCLEVBQUUsd0JBQXdCLEVBQUUsdUJBQXVCO0FBQ2xKLHVFQUF1RSwrQkFBK0IsRUFBRSwrQkFBK0IsRUFBRSw4QkFBOEI7QUFDdks7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92aW8tdi1yb2xlcGxheS1jbGllbnQvLi9zcmMvc3lzdGVtL3RyYWluL1RyYWluSGFuZGxlci50cz84OGI5Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5UcmFpbkhhbmRsZXIgPSB2b2lkIDA7XG5jb25zdCBFVHJhaW5UeXBlXzEgPSByZXF1aXJlKFwiLi9FVHJhaW5UeXBlXCIpO1xuY29uc3QgQ29tbXVuaWNhdGlvbk1hbmFnZXJfMSA9IHJlcXVpcmUoXCIuLi8uLi91dGlscy9Db21tdW5pY2F0aW9uTWFuYWdlclwiKTtcbmNvbnN0IFV0aWxpdHlfMSA9IHJlcXVpcmUoXCIuLi8uLi91dGlscy9VdGlsaXR5XCIpO1xuY2xhc3MgVHJhaW5IYW5kbGVyIHtcbiAgICBjb25zdHJ1Y3RvcihpZCwgdHlwZSkge1xuICAgICAgICB0aGlzLnNwZWVkID0gMDtcbiAgICAgICAgdGhpcy50cmFjayA9IC0xO1xuICAgICAgICB0aGlzLm93bmVyID0gJyc7XG4gICAgICAgIHRoaXMuaWQgPSBpZDtcbiAgICAgICAgdGhpcy50eXBlID0gdHlwZTtcbiAgICAgICAgY29uc3QgbW9kZWxzTG9hZGVkID0gWydmcmVpZ2h0JywgJ2ZyZWlnaHRjYXInLCAnZnJlaWdodGNhcjInLCAnZnJlaWdodGdyYWluJywgJ2ZyZWlnaHRjb250MScsICdmcmVpZ2h0Y29udDInLCAnZnJlaWdodHRyYWlsZXInLCAndGFua2VyY2FyJywgJ21ldHJvdHJhaW4nLCAnc19tX21fbHNtZXRyb18wMSddLm1hcCgobmFtZSkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIG1wLmdhbWUuc3RyZWFtaW5nLmhhc01vZGVsTG9hZGVkKG1wLmdhbWUuam9hYXQobmFtZSkpO1xuICAgICAgICB9KTtcbiAgICAgICAgaWYgKG1vZGVsc0xvYWRlZC5pbmNsdWRlcyhmYWxzZSkpIHtcbiAgICAgICAgICAgIG1wLmNvbnNvbGUubG9nRXJyb3IoJ1p1Z21vZGVscyBuaWNodCBrb3JyZWt0IGdlbGFkZW4hIEBUcmFpbkhhbmRsZXIudHMjMjAnLCB0cnVlLCB0cnVlKTtcbiAgICAgICAgICAgIHRocm93ICdadWdtb2RlbHMgbmljaHQga29ycmVrdCBnZWxhZGVuISBAVHJhaW5IYW5kbGVyLnRzIzIwJztcbiAgICAgICAgfVxuICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgRVRyYWluVHlwZV8xLkVUcmFpblR5cGUuRlJJR0hUX1RSQUlOOlxuICAgICAgICAgICAgICAgIHRoaXMudHJhaW5WZWhpY2xlSGFuZGxlID0gbXAuZ2FtZS52ZWhpY2xlLmNyZWF0ZU1pc3Npb25UcmFpbigyMywgNjcwLjIwNTYsIC02ODUuNzcwOCwgMjUuMTUzMTEsIHRydWUpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBFVHJhaW5UeXBlXzEuRVRyYWluVHlwZS5NRVRST19UUkFJTjpcbiAgICAgICAgICAgICAgICB0aGlzLnRyYWluVmVoaWNsZUhhbmRsZSA9IG1wLmdhbWUudmVoaWNsZS5jcmVhdGVNaXNzaW9uVHJhaW4oMjUsIDI0Ny45MzY0LCAtMTE5OC41OTcsIDM3LjQ0ODIsIHRydWUpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIG1wLmdhbWUuaW52b2tlKFwiMHhBRDczOEMzMDg1RkU3RTExXCIsIHRoaXMudHJhaW5WZWhpY2xlSGFuZGxlLCB0cnVlLCBmYWxzZSk7XG4gICAgICAgIG1wLnN0b3JhZ2UuZGF0YS50cmFpbkhhbmRsZXMucHVzaCh0aGlzLnRyYWluVmVoaWNsZUhhbmRsZSk7XG4gICAgICAgIG1wLnN0b3JhZ2UuZmx1c2goKTtcbiAgICAgICAgdGhpcy5zZXRTcGVlZCgwKTtcbiAgICAgICAgdGhpcy5zZXRDcnVpc2VTcGVlZCgwKTtcbiAgICB9XG4gICAgc2V0T3duZXJOYW1lKG5hbWUpIHtcbiAgICAgICAgdGhpcy5vd25lciA9IG5hbWU7XG4gICAgfVxuICAgIHNldFNwZWVkKHNwZWVkKSB7XG4gICAgICAgIGlmIChzcGVlZCA8IDApXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIG1wLmdhbWUuaW52b2tlKFwiMHhBQTBCQzkxQkUwQjc5NkUzXCIsIHRoaXMudHJhaW5WZWhpY2xlSGFuZGxlLCBzcGVlZCk7XG4gICAgICAgIHRoaXMuc3BlZWQgPSBzcGVlZDtcbiAgICB9XG4gICAgc2V0Q3J1aXNlU3BlZWQoc3BlZWQpIHtcbiAgICAgICAgbXAuZ2FtZS5pbnZva2UoXCIweDE2NDY5Mjg0REI4QzYyQjVcIiwgdGhpcy50cmFpblZlaGljbGVIYW5kbGUsIHNwZWVkKTtcbiAgICAgICAgdGhpcy5zcGVlZCA9IHNwZWVkO1xuICAgIH1cbiAgICBnZXRTcGVlZCgpIHtcbiAgICAgICAgY29uc3QgZm9yd2FyZFZlY3RvciA9IG1wLmdhbWUuaW52b2tlVmVjdG9yMyhcIjB4MEE3OTRBNUE1N0Y4REY5MVwiLCB0aGlzLnRyYWluVmVoaWNsZUhhbmRsZSk7XG4gICAgICAgIGNvbnN0IHZlbG9jaXR5VmVjdG9yID0gbXAuZ2FtZS5pbnZva2VWZWN0b3IzKFwiMHg0ODA1RDJCMUQ4Q0Y5NEE5XCIsIHRoaXMudHJhaW5WZWhpY2xlSGFuZGxlKTtcbiAgICAgICAgbGV0IHZlbG9jaXR5TWFnbml0dWRlID0gTWF0aC5zcXJ0KHZlbG9jaXR5VmVjdG9yLnggKiogMiArIHZlbG9jaXR5VmVjdG9yLnkgKiogMiArIHZlbG9jaXR5VmVjdG9yLnogKiogMik7XG4gICAgICAgIGNvbnN0IGRvdFAgPSB2ZWxvY2l0eVZlY3Rvci54ICogZm9yd2FyZFZlY3Rvci54ICsgdmVsb2NpdHlWZWN0b3IueSAqIGZvcndhcmRWZWN0b3IueSArIHZlbG9jaXR5VmVjdG9yLnogKiBmb3J3YXJkVmVjdG9yLno7XG4gICAgICAgIGNvbnN0IG1hZ25pdHVkZVAgPSB2ZWxvY2l0eU1hZ25pdHVkZSAqIE1hdGguc3FydChmb3J3YXJkVmVjdG9yLnggKiogMiArIGZvcndhcmRWZWN0b3IueSAqKiAyICsgZm9yd2FyZFZlY3Rvci56ICoqIDIpO1xuICAgICAgICBjb25zdCBhbmdsZSA9IE1hdGguYWNvcyhkb3RQIC8gbWFnbml0dWRlUCk7XG4gICAgICAgIGlmIChNYXRoLmFicyhhbmdsZSkgPiAoTWF0aC5QSSAvIDIpKSB7XG4gICAgICAgICAgICB2ZWxvY2l0eU1hZ25pdHVkZSA9IC12ZWxvY2l0eU1hZ25pdHVkZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdmVsb2NpdHlNYWduaXR1ZGU7XG4gICAgfVxuICAgIGdldFZlbG9jaXR5KCkge1xuICAgICAgICByZXR1cm4gbXAuZ2FtZS5pbnZva2VWZWN0b3IzKFwiMHg0ODA1RDJCMUQ4Q0Y5NEE5XCIsIHRoaXMudHJhaW5WZWhpY2xlSGFuZGxlKTtcbiAgICB9XG4gICAgc2V0VmVsb2NpdHkodmVsb2NpdHkpIHtcbiAgICAgICAgbXAuZ2FtZS5pbnZva2VWZWN0b3IzKFwiMHgxQzk5QkI3QjZFOTZEMTZGXCIsIHZlbG9jaXR5LngsIHZlbG9jaXR5LnksIHZlbG9jaXR5LnopO1xuICAgIH1cbiAgICBzZXRQb3NpdGlvbihwb3NpdGlvbikge1xuICAgICAgICBjb25zdCB7IHgsIHksIHogfSA9IHBvc2l0aW9uO1xuICAgICAgICBtcC5nYW1lLmludm9rZShcIjB4NTkxQ0E2NzNBQTZBQjczNlwiLCB0aGlzLnRyYWluVmVoaWNsZUhhbmRsZSwgeCwgeSwgeik7XG4gICAgfVxuICAgIGdldFBvc2l0aW9uKCkge1xuICAgICAgICByZXR1cm4gbXAuZ2FtZS5pbnZva2VWZWN0b3IzKFwiMHgzRkVGNzcwRDQwOTYwRDVBXCIsIHRoaXMudHJhaW5WZWhpY2xlSGFuZGxlLCB0cnVlKTtcbiAgICB9XG4gICAgc2V0VHJhY2sodHJhY2tJZCkge1xuICAgICAgICBtcC5nYW1lLmludm9rZShcIjB4RkQ4MTNCQjdEQjk3N0YyMFwiLCB0cmFja0lkLCB0cnVlKTtcbiAgICAgICAgdGhpcy50cmFjayA9IHRyYWNrSWQ7XG4gICAgfVxuICAgIGdldFRyYWNrKCkge1xuICAgICAgICByZXR1cm4gdGhpcy50cmFjaztcbiAgICB9XG4gICAgZ2V0VHlwZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudHlwZTtcbiAgICB9XG4gICAgZGVzdHJveSgpIHtcbiAgICAgICAgbXAuZ2FtZS52ZWhpY2xlLmRlbGV0ZU1pc3Npb25UcmFpbih0aGlzLnRyYWluVmVoaWNsZUhhbmRsZSk7XG4gICAgfVxuICAgIGdldEhhbmRsZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudHJhaW5WZWhpY2xlSGFuZGxlO1xuICAgIH1cbiAgICBvblN5bmNUaWNrKCkge1xuICAgICAgICBjb25zdCBwb3NpdGlvbiA9IHRoaXMuZ2V0UG9zaXRpb24oKTtcbiAgICAgICAgY29uc3QgYnVmZmVyID0gbmV3IEFycmF5QnVmZmVyKDMyIC8gOCAqIDQpO1xuICAgICAgICBjb25zdCBpbnQzMlZpZXcgPSBuZXcgSW50MzJBcnJheShidWZmZXIpO1xuICAgICAgICBpbnQzMlZpZXdbMF0gPSAodGhpcy5nZXRTcGVlZCgpICogTWF0aC5wb3coMTAsIDQpKSA+PiAwO1xuICAgICAgICBpbnQzMlZpZXdbMV0gPSAocG9zaXRpb24ueCAqIE1hdGgucG93KDEwLCA0KSkgPj4gMDtcbiAgICAgICAgaW50MzJWaWV3WzJdID0gKHBvc2l0aW9uLnkgKiBNYXRoLnBvdygxMCwgNCkpID4+IDA7XG4gICAgICAgIGludDMyVmlld1szXSA9IChwb3NpdGlvbi56ICogTWF0aC5wb3coMTAsIDQpKSA+PiAwO1xuICAgICAgICBDb21tdW5pY2F0aW9uTWFuYWdlcl8xLkNvbW11bmljYXRpb25NYW5hZ2VyLnRyaWdnZXJTZXJ2ZXIoJ1RyYWluU3luYzpVcGRhdGUnLCB0aGlzLmlkLCBidWZmZXIpO1xuICAgIH1cbiAgICBpbmNvbWluZ1N5bmNEYXRhKGRhdGEpIHtcbiAgICAgICAgY29uc3QgaW50MzJWaWV3ID0gbmV3IEludDMyQXJyYXkoZGF0YSk7XG4gICAgICAgIGlmIChtcC5nYW1lLmludm9rZSgnMHhBRDQ2NEYyRTE4ODM2QkZDJywgdGhpcy50cmFpblZlaGljbGVIYW5kbGUpKSB7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBbXTtcbiAgICAgICAgICAgIGludDMyVmlldy5mb3JFYWNoKChudW0sIGluZGV4KSA9PiB7XG4gICAgICAgICAgICAgICAgcmVzdWx0W2luZGV4XSA9IG51bSAvIE1hdGgucG93KDEwLCA0KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29uc3QgW3NwZWVkLCBweCwgcHksIHB6LF0gPSByZXN1bHQ7XG4gICAgICAgICAgICBjb25zdCBwb3NpdGlvbiA9IG5ldyBtcC5WZWN0b3IzKHB4LCBweSwgcHopO1xuICAgICAgICAgICAgY29uc3QgY3VycmVudFBvc2l0aW9uID0gdGhpcy5nZXRQb3NpdGlvbigpO1xuICAgICAgICAgICAgY29uc3QgZGlzdCA9IFV0aWxpdHlfMS5VdGlsaXR5LnZkaXN0Mihwb3NpdGlvbiwgY3VycmVudFBvc2l0aW9uLCB0cnVlKTtcbiAgICAgICAgICAgIGxldCBzcGVlZERpZmYgPSAwO1xuICAgICAgICAgICAgY29uc3QgZm9yd2FyZFZlY3RvciA9IG1wLmdhbWUuaW52b2tlVmVjdG9yMyhcIjB4MEE3OTRBNUE1N0Y4REY5MVwiLCB0aGlzLnRyYWluVmVoaWNsZUhhbmRsZSk7XG4gICAgICAgICAgICBjb25zdCBwb3NpdGlvbkRpZmZlcmVuY2VWZWN0b3IgPSBuZXcgbXAuVmVjdG9yMyhwb3NpdGlvbi54IC0gY3VycmVudFBvc2l0aW9uLngsIHBvc2l0aW9uLnkgLSBjdXJyZW50UG9zaXRpb24ueSwgcG9zaXRpb24ueiAtIGN1cnJlbnRQb3NpdGlvbi56KTtcbiAgICAgICAgICAgIGNvbnN0IHBvc2l0aW9uRGlmZk1hZ25pdHVkZSA9IE1hdGguc3FydChwb3NpdGlvbkRpZmZlcmVuY2VWZWN0b3IueCAqKiAyICsgcG9zaXRpb25EaWZmZXJlbmNlVmVjdG9yLnkgKiogMiArIHBvc2l0aW9uRGlmZmVyZW5jZVZlY3Rvci56ICoqIDIpO1xuICAgICAgICAgICAgY29uc3QgZG90UCA9IHBvc2l0aW9uRGlmZmVyZW5jZVZlY3Rvci54ICogZm9yd2FyZFZlY3Rvci54ICsgcG9zaXRpb25EaWZmZXJlbmNlVmVjdG9yLnkgKiBmb3J3YXJkVmVjdG9yLnkgKyBwb3NpdGlvbkRpZmZlcmVuY2VWZWN0b3IueiAqIGZvcndhcmRWZWN0b3IuejtcbiAgICAgICAgICAgIGNvbnN0IG1hZ25pdHVkZVAgPSBwb3NpdGlvbkRpZmZNYWduaXR1ZGUgKiBNYXRoLnNxcnQoZm9yd2FyZFZlY3Rvci54ICoqIDIgKyBmb3J3YXJkVmVjdG9yLnkgKiogMiArIGZvcndhcmRWZWN0b3IueiAqKiAyKTtcbiAgICAgICAgICAgIGNvbnN0IGFuZ2xlID0gTWF0aC5hY29zKGRvdFAgLyBtYWduaXR1ZGVQKTtcbiAgICAgICAgICAgIHNwZWVkRGlmZiA9IHBvc2l0aW9uRGlmZk1hZ25pdHVkZTtcbiAgICAgICAgICAgIGlmIChNYXRoLmFicyhhbmdsZSkgPiAoTWF0aC5QSSAvIDIpKSB7XG4gICAgICAgICAgICAgICAgc3BlZWREaWZmID0gLXNwZWVkRGlmZjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChkaXN0ID4gVXRpbGl0eV8xLlV0aWxpdHkubWV0ZXJzVG9WRGlzdDJVbml0KDUpKSB7XG4gICAgICAgICAgICAgICAgVXRpbGl0eV8xLlV0aWxpdHkuZGVidWdDaGF0KCdkaXN0JyArIHRoaXMuaWQsIGBEaXN0OiAke01hdGgucm91bmQoZGlzdCl9IEFuZ2xlOiAke01hdGgucm91bmQoYW5nbGUgKiAoMTgwIC8gTWF0aC5QSSkgKiAxMDApIC8gMTAwfSwgJHtNYXRoLnJvdW5kKGFuZ2xlICogMTAwKSAvIDEwMH0gU3BlZWREaWZmOiAke01hdGgucm91bmQoc3BlZWREaWZmICogMTAwKSAvIDEwMH0gWTogJHsobXAuc3RvcmFnZS5kYXRhLnRlc3RTZXJ2ZXJbJ0JFVEFfVFJBSU5fU1BFRURfWSddIHx8IDEuNSl9YCwgMSk7XG4gICAgICAgICAgICAgICAgVXRpbGl0eV8xLlV0aWxpdHkuZGVidWdDaGF0KCdkaXN0X3BvczFfJyArIHRoaXMuaWQsIGAke01hdGgucm91bmQocG9zaXRpb24ueCl9ICR7TWF0aC5yb3VuZChwb3NpdGlvbi55KX0gJHtNYXRoLnJvdW5kKHBvc2l0aW9uLnopfWAsIDEpO1xuICAgICAgICAgICAgICAgIFV0aWxpdHlfMS5VdGlsaXR5LmRlYnVnQ2hhdCgnZGlzdF9wb3MyXycgKyB0aGlzLmlkLCBgJHtNYXRoLnJvdW5kKGN1cnJlbnRQb3NpdGlvbi54KX0gJHtNYXRoLnJvdW5kKGN1cnJlbnRQb3NpdGlvbi55KX0gJHtNYXRoLnJvdW5kKGN1cnJlbnRQb3NpdGlvbi56KX1gLCAxKTtcbiAgICAgICAgICAgICAgICBpZiAoVXRpbGl0eV8xLlV0aWxpdHkudmRpc3QyKG1wLnBsYXllcnMubG9jYWwucG9zaXRpb24sIHBvc2l0aW9uKSA+IDI1MDAgKiogMikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFBvc2l0aW9uKHBvc2l0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgc3BlZWREaWZmID0gMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnNldFNwZWVkKHNwZWVkICsgc3BlZWREaWZmKTtcbiAgICAgICAgICAgIHRoaXMuc2V0Q3J1aXNlU3BlZWQoc3BlZWQgKyBzcGVlZERpZmYpO1xuICAgICAgICB9XG4gICAgfVxufVxuZXhwb3J0cy5UcmFpbkhhbmRsZXIgPSBUcmFpbkhhbmRsZXI7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/system/train/TrainHandler.ts\n");

/***/ }),

/***/ "./src/system/vehicles/AltitudeMeter.ts":
/*!**********************************************!*\
  !*** ./src/system/vehicles/AltitudeMeter.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.AltitudeMeter = void 0;\nconst Utility_1 = __webpack_require__(/*! ../../utils/Utility */ \"./src/utils/Utility.ts\");\nclass AltitudeMeter {\n    static init() {\n    }\n    static onRender() {\n        const veh = mp.players.local.vehicle;\n        if (veh == null)\n            return;\n        if (!mp.game.vehicle.isThisModelAPlane(veh.model) && !mp.game.vehicle.isThisModelAHeli(veh.model))\n            return;\n        const groundZ = mp.game.gameplay.getGroundZFor3dCoord(mp.players.local.position.x, mp.players.local.position.y, mp.players.local.position.z, 0, false);\n        const altitude = mp.players.local.position.z - groundZ;\n        const percentHeight = altitude / (2000 - groundZ);\n        const percent = (veh.minAltitude || 0) / (2000 - groundZ);\n        Utility_1.Utility.debugChat('amt2', JSON.stringify({\n            a: percent * 0.16,\n            b: percentHeight * 0.16,\n        }), 15 * 1000);\n        try {\n            mp.game.graphics.drawRect(0.975, 0.81, 0.01, 0.16 - (percent * 0.16), 0, 0, 0, 0.5);\n            mp.game.graphics.drawRect(0.975, (0.81 + 0.16) - (percent * 0.16), 0.01, percent * 0.16, 255, 0, 0, 0.5);\n            mp.game.graphics.drawRect(0.975, (0.81 + 0.16) - (percentHeight * 0.16), 0.01, 0.0025, 0, 0, 255, 1);\n        }\n        catch (_) {\n            Utility_1.Utility.debugChat('AltitudeMeterError#1', 'AltitudeMeterError!', 5000);\n        }\n    }\n}\nexports.AltitudeMeter = AltitudeMeter;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvc3lzdGVtL3ZlaGljbGVzL0FsdGl0dWRlTWV0ZXIudHMuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYiw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0QscUJBQXFCO0FBQ3JCLGtCQUFrQixtQkFBTyxDQUFDLG1EQUFxQjtBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQiIsInNvdXJjZXMiOlsid2VicGFjazovL3Zpby12LXJvbGVwbGF5LWNsaWVudC8uL3NyYy9zeXN0ZW0vdmVoaWNsZXMvQWx0aXR1ZGVNZXRlci50cz8wMzk0Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5BbHRpdHVkZU1ldGVyID0gdm9pZCAwO1xuY29uc3QgVXRpbGl0eV8xID0gcmVxdWlyZShcIi4uLy4uL3V0aWxzL1V0aWxpdHlcIik7XG5jbGFzcyBBbHRpdHVkZU1ldGVyIHtcbiAgICBzdGF0aWMgaW5pdCgpIHtcbiAgICB9XG4gICAgc3RhdGljIG9uUmVuZGVyKCkge1xuICAgICAgICBjb25zdCB2ZWggPSBtcC5wbGF5ZXJzLmxvY2FsLnZlaGljbGU7XG4gICAgICAgIGlmICh2ZWggPT0gbnVsbClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgaWYgKCFtcC5nYW1lLnZlaGljbGUuaXNUaGlzTW9kZWxBUGxhbmUodmVoLm1vZGVsKSAmJiAhbXAuZ2FtZS52ZWhpY2xlLmlzVGhpc01vZGVsQUhlbGkodmVoLm1vZGVsKSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgY29uc3QgZ3JvdW5kWiA9IG1wLmdhbWUuZ2FtZXBsYXkuZ2V0R3JvdW5kWkZvcjNkQ29vcmQobXAucGxheWVycy5sb2NhbC5wb3NpdGlvbi54LCBtcC5wbGF5ZXJzLmxvY2FsLnBvc2l0aW9uLnksIG1wLnBsYXllcnMubG9jYWwucG9zaXRpb24ueiwgMCwgZmFsc2UpO1xuICAgICAgICBjb25zdCBhbHRpdHVkZSA9IG1wLnBsYXllcnMubG9jYWwucG9zaXRpb24ueiAtIGdyb3VuZFo7XG4gICAgICAgIGNvbnN0IHBlcmNlbnRIZWlnaHQgPSBhbHRpdHVkZSAvICgyMDAwIC0gZ3JvdW5kWik7XG4gICAgICAgIGNvbnN0IHBlcmNlbnQgPSAodmVoLm1pbkFsdGl0dWRlIHx8IDApIC8gKDIwMDAgLSBncm91bmRaKTtcbiAgICAgICAgVXRpbGl0eV8xLlV0aWxpdHkuZGVidWdDaGF0KCdhbXQyJywgSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgYTogcGVyY2VudCAqIDAuMTYsXG4gICAgICAgICAgICBiOiBwZXJjZW50SGVpZ2h0ICogMC4xNixcbiAgICAgICAgfSksIDE1ICogMTAwMCk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBtcC5nYW1lLmdyYXBoaWNzLmRyYXdSZWN0KDAuOTc1LCAwLjgxLCAwLjAxLCAwLjE2IC0gKHBlcmNlbnQgKiAwLjE2KSwgMCwgMCwgMCwgMC41KTtcbiAgICAgICAgICAgIG1wLmdhbWUuZ3JhcGhpY3MuZHJhd1JlY3QoMC45NzUsICgwLjgxICsgMC4xNikgLSAocGVyY2VudCAqIDAuMTYpLCAwLjAxLCBwZXJjZW50ICogMC4xNiwgMjU1LCAwLCAwLCAwLjUpO1xuICAgICAgICAgICAgbXAuZ2FtZS5ncmFwaGljcy5kcmF3UmVjdCgwLjk3NSwgKDAuODEgKyAwLjE2KSAtIChwZXJjZW50SGVpZ2h0ICogMC4xNiksIDAuMDEsIDAuMDAyNSwgMCwgMCwgMjU1LCAxKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoXykge1xuICAgICAgICAgICAgVXRpbGl0eV8xLlV0aWxpdHkuZGVidWdDaGF0KCdBbHRpdHVkZU1ldGVyRXJyb3IjMScsICdBbHRpdHVkZU1ldGVyRXJyb3IhJywgNTAwMCk7XG4gICAgICAgIH1cbiAgICB9XG59XG5leHBvcnRzLkFsdGl0dWRlTWV0ZXIgPSBBbHRpdHVkZU1ldGVyO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/system/vehicles/AltitudeMeter.ts\n");

/***/ }),

/***/ "./src/system/vehicles/VehicleBoosts.ts":
/*!**********************************************!*\
  !*** ./src/system/vehicles/VehicleBoosts.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.VehicleBoosts = void 0;\nconst CommunicationManager_1 = __webpack_require__(/*! ../../utils/CommunicationManager */ \"./src/utils/CommunicationManager.ts\");\nclass VehicleBoosts {\n    static init() {\n        mp.events.add('render', VehicleBoosts.onRender);\n        CommunicationManager_1.CommunicationManager.addSafeServerEvent('SetEnginePowerMultiplier', VehicleBoosts.onSetEnginePowerMultiplier);\n    }\n    static onRender() {\n        const veh = mp.players.local.vehicle;\n        if (veh == null) {\n            VehicleBoosts.vehicleData.handle = null;\n            return;\n        }\n        if (VehicleBoosts.vehicleData.handle !== veh.handle) {\n            VehicleBoosts.vehicleData.handle = veh.handle;\n            VehicleBoosts.vehicleData.engineTuning = (veh.getMod(11) + 1);\n            VehicleBoosts.vehicleData.turboTuning = veh.getMod(18) != -1;\n            VehicleBoosts.vehicleData.groupOwnership = veh.getVariable(\"GROUP_VEHICLE_OWNER\");\n            VehicleBoosts.vehicleData.groupOwnership = VehicleBoosts.vehicleData.groupOwnership ? VehicleBoosts.vehicleData.groupOwnership >> 0 : null;\n            VehicleBoosts.vehicleData.class = veh.getClass();\n        }\n        if (VehicleBoosts.vehicleData.class == 20) {\n            return;\n        }\n        let torque = 1.2;\n        torque += VehicleBoosts.vehicleData.engineTuning * VehicleBoosts.engineTuningConst;\n        if (VehicleBoosts.vehicleData.turboTuning) {\n            torque += VehicleBoosts.turboBoost;\n            veh.setHandling('fClutchChangeRateScaleUpShift', 50);\n        }\n        if (VehicleBoosts.vehicleData.groupOwnership == 3) {\n            torque += (VehicleBoosts.engineTuningConst * 2);\n        }\n        if (VehicleBoosts.vehicleData.class == 2 || VehicleBoosts.vehicleData.class == 9 || veh.model == 0x1B38E955 || veh.model == 0x72935408 || veh.model == 0x2469aa5f || veh.model == 0x9DC66994) {\n            veh.setHandling('fTractionLossMult', 0);\n        }\n        veh.setEngineTorqueMultiplier(torque);\n    }\n    static async onSetEnginePowerMultiplier(value) {\n        if (mp.players.local.isInAnyVehicle(false)) {\n            const veh = mp.players.local.vehicle;\n            if (veh != null) {\n                if (veh.handle !== 0) {\n                    if (mp.vehicles.exists(veh)) {\n                        veh.setEnginePowerMultiplier(value);\n                        veh.enginePowerMultiplier = value;\n                    }\n                }\n            }\n        }\n    }\n}\nexports.VehicleBoosts = VehicleBoosts;\nVehicleBoosts.engineTuningConst = .185;\nVehicleBoosts.turboBoost = .15;\nVehicleBoosts.vehicleData = {\n    handle: null,\n    engineTuning: 0,\n    turboTuning: false,\n    groupOwnership: null,\n    class: 0,\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvc3lzdGVtL3ZlaGljbGVzL1ZlaGljbGVCb29zdHMudHMuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYiw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0QscUJBQXFCO0FBQ3JCLCtCQUErQixtQkFBTyxDQUFDLDZFQUFrQztBQUN6RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3Zpby12LXJvbGVwbGF5LWNsaWVudC8uL3NyYy9zeXN0ZW0vdmVoaWNsZXMvVmVoaWNsZUJvb3N0cy50cz9hZjQ2Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5WZWhpY2xlQm9vc3RzID0gdm9pZCAwO1xuY29uc3QgQ29tbXVuaWNhdGlvbk1hbmFnZXJfMSA9IHJlcXVpcmUoXCIuLi8uLi91dGlscy9Db21tdW5pY2F0aW9uTWFuYWdlclwiKTtcbmNsYXNzIFZlaGljbGVCb29zdHMge1xuICAgIHN0YXRpYyBpbml0KCkge1xuICAgICAgICBtcC5ldmVudHMuYWRkKCdyZW5kZXInLCBWZWhpY2xlQm9vc3RzLm9uUmVuZGVyKTtcbiAgICAgICAgQ29tbXVuaWNhdGlvbk1hbmFnZXJfMS5Db21tdW5pY2F0aW9uTWFuYWdlci5hZGRTYWZlU2VydmVyRXZlbnQoJ1NldEVuZ2luZVBvd2VyTXVsdGlwbGllcicsIFZlaGljbGVCb29zdHMub25TZXRFbmdpbmVQb3dlck11bHRpcGxpZXIpO1xuICAgIH1cbiAgICBzdGF0aWMgb25SZW5kZXIoKSB7XG4gICAgICAgIGNvbnN0IHZlaCA9IG1wLnBsYXllcnMubG9jYWwudmVoaWNsZTtcbiAgICAgICAgaWYgKHZlaCA9PSBudWxsKSB7XG4gICAgICAgICAgICBWZWhpY2xlQm9vc3RzLnZlaGljbGVEYXRhLmhhbmRsZSA9IG51bGw7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKFZlaGljbGVCb29zdHMudmVoaWNsZURhdGEuaGFuZGxlICE9PSB2ZWguaGFuZGxlKSB7XG4gICAgICAgICAgICBWZWhpY2xlQm9vc3RzLnZlaGljbGVEYXRhLmhhbmRsZSA9IHZlaC5oYW5kbGU7XG4gICAgICAgICAgICBWZWhpY2xlQm9vc3RzLnZlaGljbGVEYXRhLmVuZ2luZVR1bmluZyA9ICh2ZWguZ2V0TW9kKDExKSArIDEpO1xuICAgICAgICAgICAgVmVoaWNsZUJvb3N0cy52ZWhpY2xlRGF0YS50dXJib1R1bmluZyA9IHZlaC5nZXRNb2QoMTgpICE9IC0xO1xuICAgICAgICAgICAgVmVoaWNsZUJvb3N0cy52ZWhpY2xlRGF0YS5ncm91cE93bmVyc2hpcCA9IHZlaC5nZXRWYXJpYWJsZShcIkdST1VQX1ZFSElDTEVfT1dORVJcIik7XG4gICAgICAgICAgICBWZWhpY2xlQm9vc3RzLnZlaGljbGVEYXRhLmdyb3VwT3duZXJzaGlwID0gVmVoaWNsZUJvb3N0cy52ZWhpY2xlRGF0YS5ncm91cE93bmVyc2hpcCA/IFZlaGljbGVCb29zdHMudmVoaWNsZURhdGEuZ3JvdXBPd25lcnNoaXAgPj4gMCA6IG51bGw7XG4gICAgICAgICAgICBWZWhpY2xlQm9vc3RzLnZlaGljbGVEYXRhLmNsYXNzID0gdmVoLmdldENsYXNzKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKFZlaGljbGVCb29zdHMudmVoaWNsZURhdGEuY2xhc3MgPT0gMjApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBsZXQgdG9ycXVlID0gMS4yO1xuICAgICAgICB0b3JxdWUgKz0gVmVoaWNsZUJvb3N0cy52ZWhpY2xlRGF0YS5lbmdpbmVUdW5pbmcgKiBWZWhpY2xlQm9vc3RzLmVuZ2luZVR1bmluZ0NvbnN0O1xuICAgICAgICBpZiAoVmVoaWNsZUJvb3N0cy52ZWhpY2xlRGF0YS50dXJib1R1bmluZykge1xuICAgICAgICAgICAgdG9ycXVlICs9IFZlaGljbGVCb29zdHMudHVyYm9Cb29zdDtcbiAgICAgICAgICAgIHZlaC5zZXRIYW5kbGluZygnZkNsdXRjaENoYW5nZVJhdGVTY2FsZVVwU2hpZnQnLCA1MCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKFZlaGljbGVCb29zdHMudmVoaWNsZURhdGEuZ3JvdXBPd25lcnNoaXAgPT0gMykge1xuICAgICAgICAgICAgdG9ycXVlICs9IChWZWhpY2xlQm9vc3RzLmVuZ2luZVR1bmluZ0NvbnN0ICogMik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKFZlaGljbGVCb29zdHMudmVoaWNsZURhdGEuY2xhc3MgPT0gMiB8fCBWZWhpY2xlQm9vc3RzLnZlaGljbGVEYXRhLmNsYXNzID09IDkgfHwgdmVoLm1vZGVsID09IDB4MUIzOEU5NTUgfHwgdmVoLm1vZGVsID09IDB4NzI5MzU0MDggfHwgdmVoLm1vZGVsID09IDB4MjQ2OWFhNWYgfHwgdmVoLm1vZGVsID09IDB4OURDNjY5OTQpIHtcbiAgICAgICAgICAgIHZlaC5zZXRIYW5kbGluZygnZlRyYWN0aW9uTG9zc011bHQnLCAwKTtcbiAgICAgICAgfVxuICAgICAgICB2ZWguc2V0RW5naW5lVG9ycXVlTXVsdGlwbGllcih0b3JxdWUpO1xuICAgIH1cbiAgICBzdGF0aWMgYXN5bmMgb25TZXRFbmdpbmVQb3dlck11bHRpcGxpZXIodmFsdWUpIHtcbiAgICAgICAgaWYgKG1wLnBsYXllcnMubG9jYWwuaXNJbkFueVZlaGljbGUoZmFsc2UpKSB7XG4gICAgICAgICAgICBjb25zdCB2ZWggPSBtcC5wbGF5ZXJzLmxvY2FsLnZlaGljbGU7XG4gICAgICAgICAgICBpZiAodmVoICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBpZiAodmVoLmhhbmRsZSAhPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAobXAudmVoaWNsZXMuZXhpc3RzKHZlaCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZlaC5zZXRFbmdpbmVQb3dlck11bHRpcGxpZXIodmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmVoLmVuZ2luZVBvd2VyTXVsdGlwbGllciA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuZXhwb3J0cy5WZWhpY2xlQm9vc3RzID0gVmVoaWNsZUJvb3N0cztcblZlaGljbGVCb29zdHMuZW5naW5lVHVuaW5nQ29uc3QgPSAuMTg1O1xuVmVoaWNsZUJvb3N0cy50dXJib0Jvb3N0ID0gLjE1O1xuVmVoaWNsZUJvb3N0cy52ZWhpY2xlRGF0YSA9IHtcbiAgICBoYW5kbGU6IG51bGwsXG4gICAgZW5naW5lVHVuaW5nOiAwLFxuICAgIHR1cmJvVHVuaW5nOiBmYWxzZSxcbiAgICBncm91cE93bmVyc2hpcDogbnVsbCxcbiAgICBjbGFzczogMCxcbn07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/system/vehicles/VehicleBoosts.ts\n");

/***/ }),

/***/ "./src/utils/CommunicationManager.ts":
/*!*******************************************!*\
  !*** ./src/utils/CommunicationManager.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.CommunicationManager = void 0;\nconst Globals_1 = __webpack_require__(/*! ./Globals */ \"./src/utils/Globals.ts\");\nclass CommunicationManager {\n    static triggerServer(eventName, ...args) {\n        mp.events.callRemote.apply(null, [eventName, ...args]);\n    }\n    static addServerEvent(eventName, callback) {\n        mp.events.add(eventName, (...args) => {\n            callback(...args);\n        });\n    }\n    static addSafeServerEvent(eventName, callback) {\n        mp.events.add(eventName, (...serverArguments) => {\n            let sentKey = '';\n            if (serverArguments.length >= 1) {\n                sentKey = serverArguments[0];\n                if (sentKey == Globals_1.Globals.SAVE_SERVER_TRIGGER_KEY || Globals_1.Globals.SAVE_SERVER_TRIGGER_KEY == \"\" || Globals_1.Globals.SAVE_SERVER_TRIGGER_KEY == null) {\n                    serverArguments.shift();\n                    callback(...serverArguments);\n                }\n            }\n        });\n    }\n}\nexports.CommunicationManager = CommunicationManager;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvdXRpbHMvQ29tbXVuaWNhdGlvbk1hbmFnZXIudHMuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYiw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0QsNEJBQTRCO0FBQzVCLGtCQUFrQixtQkFBTyxDQUFDLHlDQUFXO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLDRCQUE0QiIsInNvdXJjZXMiOlsid2VicGFjazovL3Zpby12LXJvbGVwbGF5LWNsaWVudC8uL3NyYy91dGlscy9Db21tdW5pY2F0aW9uTWFuYWdlci50cz8xOTcyIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5Db21tdW5pY2F0aW9uTWFuYWdlciA9IHZvaWQgMDtcbmNvbnN0IEdsb2JhbHNfMSA9IHJlcXVpcmUoXCIuL0dsb2JhbHNcIik7XG5jbGFzcyBDb21tdW5pY2F0aW9uTWFuYWdlciB7XG4gICAgc3RhdGljIHRyaWdnZXJTZXJ2ZXIoZXZlbnROYW1lLCAuLi5hcmdzKSB7XG4gICAgICAgIG1wLmV2ZW50cy5jYWxsUmVtb3RlLmFwcGx5KG51bGwsIFtldmVudE5hbWUsIC4uLmFyZ3NdKTtcbiAgICB9XG4gICAgc3RhdGljIGFkZFNlcnZlckV2ZW50KGV2ZW50TmFtZSwgY2FsbGJhY2spIHtcbiAgICAgICAgbXAuZXZlbnRzLmFkZChldmVudE5hbWUsICguLi5hcmdzKSA9PiB7XG4gICAgICAgICAgICBjYWxsYmFjayguLi5hcmdzKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHN0YXRpYyBhZGRTYWZlU2VydmVyRXZlbnQoZXZlbnROYW1lLCBjYWxsYmFjaykge1xuICAgICAgICBtcC5ldmVudHMuYWRkKGV2ZW50TmFtZSwgKC4uLnNlcnZlckFyZ3VtZW50cykgPT4ge1xuICAgICAgICAgICAgbGV0IHNlbnRLZXkgPSAnJztcbiAgICAgICAgICAgIGlmIChzZXJ2ZXJBcmd1bWVudHMubGVuZ3RoID49IDEpIHtcbiAgICAgICAgICAgICAgICBzZW50S2V5ID0gc2VydmVyQXJndW1lbnRzWzBdO1xuICAgICAgICAgICAgICAgIGlmIChzZW50S2V5ID09IEdsb2JhbHNfMS5HbG9iYWxzLlNBVkVfU0VSVkVSX1RSSUdHRVJfS0VZIHx8IEdsb2JhbHNfMS5HbG9iYWxzLlNBVkVfU0VSVkVSX1RSSUdHRVJfS0VZID09IFwiXCIgfHwgR2xvYmFsc18xLkdsb2JhbHMuU0FWRV9TRVJWRVJfVFJJR0dFUl9LRVkgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBzZXJ2ZXJBcmd1bWVudHMuc2hpZnQoKTtcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soLi4uc2VydmVyQXJndW1lbnRzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbn1cbmV4cG9ydHMuQ29tbXVuaWNhdGlvbk1hbmFnZXIgPSBDb21tdW5pY2F0aW9uTWFuYWdlcjtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/utils/CommunicationManager.ts\n");

/***/ }),

/***/ "./src/utils/Globals.ts":
/*!******************************!*\
  !*** ./src/utils/Globals.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.Globals = void 0;\nclass Globals {\n}\nexports.Globals = Globals;\nGlobals.TRAIN_SYNC_RATE = 200;\nGlobals.IS_ON_BETA_SERVER = false;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvdXRpbHMvR2xvYmFscy50cy5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiLDhDQUE2QyxFQUFFLGFBQWEsRUFBQztBQUM3RCxlQUFlO0FBQ2Y7QUFDQTtBQUNBLGVBQWU7QUFDZjtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdmlvLXYtcm9sZXBsYXktY2xpZW50Ly4vc3JjL3V0aWxzL0dsb2JhbHMudHM/ZDA0NSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuR2xvYmFscyA9IHZvaWQgMDtcbmNsYXNzIEdsb2JhbHMge1xufVxuZXhwb3J0cy5HbG9iYWxzID0gR2xvYmFscztcbkdsb2JhbHMuVFJBSU5fU1lOQ19SQVRFID0gMjAwO1xuR2xvYmFscy5JU19PTl9CRVRBX1NFUlZFUiA9IGZhbHNlO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/utils/Globals.ts\n");

/***/ }),

/***/ "./src/utils/Utility.ts":
/*!******************************!*\
  !*** ./src/utils/Utility.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.Utility = void 0;\nconst Globals_1 = __webpack_require__(/*! ./Globals */ \"./src/utils/Globals.ts\");\nclass Utility {\n    static polar3DToWorld3D(entityPosition, radius, polarAngleDeg, azimuthAngleDeg) {\n        const polarAngleRad = polarAngleDeg * Math.PI / 180.0;\n        const azimuthAngleRad = azimuthAngleDeg * Math.PI / 180.0;\n        return new mp.Vector3(entityPosition.x + radius * (Math.sin(azimuthAngleRad) * Math.cos(polarAngleRad)), entityPosition.y - radius * (Math.sin(azimuthAngleRad) * Math.sin(polarAngleRad)), entityPosition.z - radius * Math.cos(azimuthAngleRad));\n    }\n    static lerp(a, b, n) {\n        return (1 - n) * a + n * b;\n    }\n    static vdist(pos1, pos2, excludeZ = false) {\n        return mp.game.system.vdist2(pos1.x, pos1.y, excludeZ ? 0 : pos1.z, pos2.x, pos2.y, excludeZ ? 0 : pos2.z);\n    }\n    static vdist2(pos1, pos2, excludeZ = false) {\n        return mp.game.system.vdist2(pos1.x, pos1.y, excludeZ ? 0 : pos1.z, pos2.x, pos2.y, excludeZ ? 0 : pos2.z);\n    }\n    static metersToVDist2Unit(meters) {\n        return mp.game.system.vdist2(0, 0, 0, 0, 0, meters);\n    }\n    static requestModelAsync(model, ms) {\n        return new Promise(resolve => {\n            if (model != 0) {\n                if (mp.game.streaming.isModelValid(model)) {\n                    if (!mp.game.streaming.hasModelLoaded(model)) {\n                        mp.game.streaming.requestModel(model);\n                        const end = new Date().getTime() + ms;\n                        const interval = setInterval(() => {\n                            if (mp.game.streaming.hasModelLoaded(model)) {\n                                clearInterval(interval);\n                                resolve(true);\n                            }\n                            else if (new Date().getTime() >= end) {\n                                clearInterval(interval);\n                                resolve(false);\n                            }\n                            else {\n                                mp.game.streaming.requestModel(model);\n                            }\n                        }, 200);\n                    }\n                    else {\n                        resolve(true);\n                    }\n                }\n                else {\n                    resolve(false);\n                }\n            }\n            else {\n                resolve(false);\n            }\n        });\n    }\n    static randomNumber(min, max) {\n        return Math.random() * (max - min) + min;\n    }\n    static debugChat(id, msg, timeout = 0) {\n        return;\n        if (!Globals_1.Globals.IS_ON_BETA_SERVER)\n            return;\n        if (Date.now() - (Utility.debugChatTimeout.get(id) || 0) < timeout) {\n            return;\n        }\n        mp.gui.chat.push(msg);\n        if (timeout > 0) {\n            Utility.debugChatTimeout.set(id, Date.now());\n        }\n    }\n}\nexports.Utility = Utility;\nUtility.debugChatTimeout = new Map();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvdXRpbHMvVXRpbGl0eS50cy5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiLDhDQUE2QyxFQUFFLGFBQWEsRUFBQztBQUM3RCxlQUFlO0FBQ2Ysa0JBQWtCLG1CQUFPLENBQUMseUNBQVc7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlO0FBQ2YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92aW8tdi1yb2xlcGxheS1jbGllbnQvLi9zcmMvdXRpbHMvVXRpbGl0eS50cz8yMWY2Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5VdGlsaXR5ID0gdm9pZCAwO1xuY29uc3QgR2xvYmFsc18xID0gcmVxdWlyZShcIi4vR2xvYmFsc1wiKTtcbmNsYXNzIFV0aWxpdHkge1xuICAgIHN0YXRpYyBwb2xhcjNEVG9Xb3JsZDNEKGVudGl0eVBvc2l0aW9uLCByYWRpdXMsIHBvbGFyQW5nbGVEZWcsIGF6aW11dGhBbmdsZURlZykge1xuICAgICAgICBjb25zdCBwb2xhckFuZ2xlUmFkID0gcG9sYXJBbmdsZURlZyAqIE1hdGguUEkgLyAxODAuMDtcbiAgICAgICAgY29uc3QgYXppbXV0aEFuZ2xlUmFkID0gYXppbXV0aEFuZ2xlRGVnICogTWF0aC5QSSAvIDE4MC4wO1xuICAgICAgICByZXR1cm4gbmV3IG1wLlZlY3RvcjMoZW50aXR5UG9zaXRpb24ueCArIHJhZGl1cyAqIChNYXRoLnNpbihhemltdXRoQW5nbGVSYWQpICogTWF0aC5jb3MocG9sYXJBbmdsZVJhZCkpLCBlbnRpdHlQb3NpdGlvbi55IC0gcmFkaXVzICogKE1hdGguc2luKGF6aW11dGhBbmdsZVJhZCkgKiBNYXRoLnNpbihwb2xhckFuZ2xlUmFkKSksIGVudGl0eVBvc2l0aW9uLnogLSByYWRpdXMgKiBNYXRoLmNvcyhhemltdXRoQW5nbGVSYWQpKTtcbiAgICB9XG4gICAgc3RhdGljIGxlcnAoYSwgYiwgbikge1xuICAgICAgICByZXR1cm4gKDEgLSBuKSAqIGEgKyBuICogYjtcbiAgICB9XG4gICAgc3RhdGljIHZkaXN0KHBvczEsIHBvczIsIGV4Y2x1ZGVaID0gZmFsc2UpIHtcbiAgICAgICAgcmV0dXJuIG1wLmdhbWUuc3lzdGVtLnZkaXN0Mihwb3MxLngsIHBvczEueSwgZXhjbHVkZVogPyAwIDogcG9zMS56LCBwb3MyLngsIHBvczIueSwgZXhjbHVkZVogPyAwIDogcG9zMi56KTtcbiAgICB9XG4gICAgc3RhdGljIHZkaXN0Mihwb3MxLCBwb3MyLCBleGNsdWRlWiA9IGZhbHNlKSB7XG4gICAgICAgIHJldHVybiBtcC5nYW1lLnN5c3RlbS52ZGlzdDIocG9zMS54LCBwb3MxLnksIGV4Y2x1ZGVaID8gMCA6IHBvczEueiwgcG9zMi54LCBwb3MyLnksIGV4Y2x1ZGVaID8gMCA6IHBvczIueik7XG4gICAgfVxuICAgIHN0YXRpYyBtZXRlcnNUb1ZEaXN0MlVuaXQobWV0ZXJzKSB7XG4gICAgICAgIHJldHVybiBtcC5nYW1lLnN5c3RlbS52ZGlzdDIoMCwgMCwgMCwgMCwgMCwgbWV0ZXJzKTtcbiAgICB9XG4gICAgc3RhdGljIHJlcXVlc3RNb2RlbEFzeW5jKG1vZGVsLCBtcykge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICAgICAgICBpZiAobW9kZWwgIT0gMCkge1xuICAgICAgICAgICAgICAgIGlmIChtcC5nYW1lLnN0cmVhbWluZy5pc01vZGVsVmFsaWQobW9kZWwpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghbXAuZ2FtZS5zdHJlYW1pbmcuaGFzTW9kZWxMb2FkZWQobW9kZWwpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtcC5nYW1lLnN0cmVhbWluZy5yZXF1ZXN0TW9kZWwobW9kZWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZW5kID0gbmV3IERhdGUoKS5nZXRUaW1lKCkgKyBtcztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtcC5nYW1lLnN0cmVhbWluZy5oYXNNb2RlbExvYWRlZChtb2RlbCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChpbnRlcnZhbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKG5ldyBEYXRlKCkuZ2V0VGltZSgpID49IGVuZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKGludGVydmFsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtcC5nYW1lLnN0cmVhbWluZy5yZXF1ZXN0TW9kZWwobW9kZWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIDIwMCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKGZhbHNlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXNvbHZlKGZhbHNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHN0YXRpYyByYW5kb21OdW1iZXIobWluLCBtYXgpIHtcbiAgICAgICAgcmV0dXJuIE1hdGgucmFuZG9tKCkgKiAobWF4IC0gbWluKSArIG1pbjtcbiAgICB9XG4gICAgc3RhdGljIGRlYnVnQ2hhdChpZCwgbXNnLCB0aW1lb3V0ID0gMCkge1xuICAgICAgICByZXR1cm47XG4gICAgICAgIGlmICghR2xvYmFsc18xLkdsb2JhbHMuSVNfT05fQkVUQV9TRVJWRVIpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGlmIChEYXRlLm5vdygpIC0gKFV0aWxpdHkuZGVidWdDaGF0VGltZW91dC5nZXQoaWQpIHx8IDApIDwgdGltZW91dCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIG1wLmd1aS5jaGF0LnB1c2gobXNnKTtcbiAgICAgICAgaWYgKHRpbWVvdXQgPiAwKSB7XG4gICAgICAgICAgICBVdGlsaXR5LmRlYnVnQ2hhdFRpbWVvdXQuc2V0KGlkLCBEYXRlLm5vdygpKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmV4cG9ydHMuVXRpbGl0eSA9IFV0aWxpdHk7XG5VdGlsaXR5LmRlYnVnQ2hhdFRpbWVvdXQgPSBuZXcgTWFwKCk7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/utils/Utility.ts\n");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval-source-map devtool is used.
/******/ 	var __webpack_exports__ = __webpack_require__("./src/index.ts");
/******/ 	
/******/ })()
;
}